<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>„Ñè„ÑúÀãÁöÑÊ≤ñÁπ©‰πãÊóÖÔºÅüçç</title>
    <!-- ÂºïÂÖ• React Ëàá ReactDOM -->
    <script
      crossorigin
      src="https://unpkg.com/react@18/umd/react.production.min.js"
    ></script>
    <script
      crossorigin
      src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"
    ></script>
    <!-- ÂºïÂÖ• Babel Áî®ÊñºËß£Êûê JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- ÂºïÂÖ• Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Firebase SDK Setup -->
    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
      // ÂºïÂÖ• Google ÁôªÂÖ•ÊâÄÈúÄÊ®°ÁµÑ
      import {
        getAuth,
        signInAnonymously,
        GoogleAuthProvider,
        signInWithPopup,
        signOut,
        onAuthStateChanged,
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
      import {
        getFirestore,
        collection,
        doc,
        addDoc,
        deleteDoc,
        updateDoc,
        onSnapshot,
        query,
        orderBy,
      } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

      // ÊÇ®ÁöÑ Firebase ÈÖçÁΩÆ
      const firebaseConfig = {
        apiKey: "AIzaSyC0pJgycqVxdLcm0U_VNPgB9B7hEVNROTk",
        authDomain: "okinawa-trip-2025.firebaseapp.com",
        projectId: "okinawa-trip-2025",
        storageBucket: "okinawa-trip-2025.firebasestorage.app",
        messagingSenderId: "959389446092",
        appId: "1:959389446092:web:665c6d7557f0d6b5f17769",
      };

      const appId = "default-trip-app";

      try {
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const googleProvider = new GoogleAuthProvider();

        // Â∞áÂäüËÉΩÊéõËºâÂà∞ windowÔºå‰æõ React ‰ΩøÁî®
        window.fb = {
          auth,
          db,
          appId,
          googleProvider,
          signInWithPopup,
          signOut,
          signInAnonymously,
          onAuthStateChanged,
          collection,
          doc,
          addDoc,
          deleteDoc,
          updateDoc,
          onSnapshot,
          query,
          orderBy,
        };
        console.log("Firebase initialized successfully");
      } catch (e) {
        console.error("Firebase init failed:", e);
      }
    </script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              sb: {
                yellow: "#F7E35E",
                darkYellow: "#E6D04A",
                brown: "#8F5B36",
                pink: "#FF959D",
                darkPink: "#E87D85",
                blue: "#65C0E2",
                teal: "#20B2AA",
                purple: "#B19CD9",
                green: "#A0D6B4",
                red: "#D63C38",
                plankton: "#1F7A5E",
                sand: "#FDFBF7",
              },
            },
            fontFamily: {
              cartoon: [
                '"Comic Sans MS"',
                '"Chalkboard SE"',
                '"Arial Rounded MT Bold"',
                "sans-serif",
              ],
            },
            boxShadow: {
              cartoon: "4px 4px 0px 0px rgba(0,0,0,0.15)",
              "cartoon-hover": "2px 2px 0px 0px rgba(0,0,0,0.15)",
            },
            animation: {
              "float-slow": "float 6s ease-in-out infinite",
              "float-medium": "float 4s ease-in-out infinite",
              "float-fast": "float 3s ease-in-out infinite",
              "spin-slow": "spin 12s linear infinite",
              "spin-medium": "spin 6s linear infinite",
              "spin-fast": "spin 0.8s linear infinite",
              "spin-super-fast": "spin 0.4s linear infinite",
              "spin-reverse": "spin 15s linear infinite reverse",
              "spin-reverse-fast": "spin 0.6s linear infinite reverse",
              "wander-slow": "wander 15s ease-in-out infinite",
              "wander-medium": "wander 10s ease-in-out infinite",
              "wander-fast": "wander 8s ease-in-out infinite",
              "float-everywhere-1": "path1 25s infinite linear",
              "float-everywhere-2": "path2 30s infinite linear",
              "float-everywhere-3": "path3 35s infinite linear",
            },
            keyframes: {
              float: {
                "0%, 100%": { transform: "translateY(0)" },
                "50%": { transform: "translateY(-20px)" },
              },
              wander: {
                "0%, 100%": { transform: "translate(0, 0) rotate(0deg)" },
                "25%": { transform: "translate(10px, -15px) rotate(3deg)" },
                "50%": { transform: "translate(-5px, -25px) rotate(-3deg)" },
                "75%": { transform: "translate(-15px, -10px) rotate(1deg)" },
              },
              path1: {
                "0%": { transform: "translate(5vw, 5vh)" },
                "25%": { transform: "translate(85vw, 20vh)" },
                "50%": { transform: "translate(40vw, 85vh)" },
                "75%": { transform: "translate(10vw, 60vh)" },
                "100%": { transform: "translate(5vw, 5vh)" },
              },
              path2: {
                "0%": { transform: "translate(90vw, 90vh)" },
                "33%": { transform: "translate(20vw, 10vh)" },
                "66%": { transform: "translate(10vw, 50vh)" },
                "100%": { transform: "translate(90vw, 90vh)" },
              },
              path3: {
                "0%": { transform: "translate(50vw, 50vh)" },
                "25%": { transform: "translate(10vw, 80vh)" },
                "50%": { transform: "translate(80vw, 10vh)" },
                "75%": { transform: "translate(90vw, 90vh)" },
                "100%": { transform: "translate(50vw, 50vh)" },
              },
            },
          },
        },
      };
    </script>
    <style>
      ::-webkit-scrollbar {
        width: 10px;
        height: 10px;
      }
      ::-webkit-scrollbar-track {
        background: #65c0e2;
      }
      ::-webkit-scrollbar-thumb {
        background: #f7e35e;
        border-radius: 10px;
        border: 2px solid #65c0e2;
      }
      ::-webkit-scrollbar-thumb:hover {
        background: #ff959d;
      }
      body {
        font-family: "Comic Sans MS", "Chalkboard SE", "Arial Rounded MT Bold",
          sans-serif;
        background-color: #65c0e2;
        color: #5d4037;
        overflow-x: hidden;
      }
      .animate-fade-in {
        animation: fadeIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px) scale(0.95);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
      .bg-illustration {
        position: fixed;
        z-index: -1;
        pointer-events: none;
      }
      .sticker-img {
        filter: drop-shadow(2px 4px 6px rgba(0, 0, 0, 0.2));
        object-fit: contain;
      }
    </style>
  </head>

  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      const CUSTOM_IMAGE_SRC =
        "https://www.alcohol.com.tw/upload/catalog_m/ALL_catalog_21A29_t2pvytyv7q.png";
      const CUSTOM_IMAGE_SRC_2 =
        "https://cohoimports.com/cdn/shop/files/Orion_334ml.png";

      // SVG ÂúñÊ®ôÁµÑ‰ª∂
      const Icons = {
        Plane: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <path d="M2 12h20" />
            <path d="M13 2a10.3 10.3 0 0 0 4.39 6.66C20.09 10.46 21 11 21 11H3s1 .54 3.61 2.34A10.3 10.3 0 0 0 11 20" />
            <path d="m5 17 2 2" />
          </svg>
        ),
        Hotel: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <path d="M2 20v-8h20v8" />
            <path d="M2 20h20" />
            <path d="M5 8h14" />
            <path d="M2 4v16" />
            <path d="M22 4v16" />
            <path d="M8 8v4" />
            <path d="M16 8v4" />
          </svg>
        ),
        Car: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2" />
            <circle cx="7" cy="17" r="2" />
            <path d="M9 17h6" />
            <circle cx="17" cy="17" r="2" />
          </svg>
        ),
        MapPin: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" />
            <circle cx="12" cy="10" r="3" />
          </svg>
        ),
        Clock: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <circle cx="12" cy="12" r="10" />
            <polyline points="12 6 12 12 16 14" />
          </svg>
        ),
        Wallet: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4" />
            <path d="M3 5v14a2 2 0 0 0 2 2h16v-5" />
            <path d="M18 12a2 2 0 0 0 0 4h4v-4Z" />
          </svg>
        ),
        Calendar: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <rect width="18" height="18" x="3" y="4" rx="2" ry="2" />
            <line x1="16" x2="16" y1="2" y2="6" />
            <line x1="8" x2="8" y1="2" y2="6" />
            <line x1="3" x2="21" y1="10" y2="10" />
          </svg>
        ),
        Utensils: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2" />
            <path d="M7 2v20" />
            <path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7" />
          </svg>
        ),
        Info: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <circle cx="12" cy="12" r="10" />
            <path d="M12 16v-4" />
            <path d="M12 8h.01" />
          </svg>
        ),
        ArrowRight: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <path d="M5 12h14" />
            <path d="m12 5 7 7-7 7" />
          </svg>
        ),
        X: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <path d="M18 6 6 18" />
            <path d="m6 6 12 12" />
          </svg>
        ),
        Map: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21" />
            <line x1="9" x2="9" y1="3" y2="18" />
            <line x1="15" x2="15" y1="6" y2="21" />
          </svg>
        ),
        ExternalLink: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
            <polyline points="15 3 21 3 21 9" />
            <line x1="10" x2="21" y1="14" y2="3" />
          </svg>
        ),
        Timer: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <line x1="10" x2="14" y1="2" y2="2" />
            <line x1="12" x2="15" y1="14" y2="11" />
            <circle cx="12" cy="14" r="8" />
          </svg>
        ),
        Anchor: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <circle cx="12" cy="5" r="3" />
            <line x1="12" x2="12" y1="22" y2="8" />
            <path d="M5 12H2a10 10 0 0 0 20 0h-3" />
          </svg>
        ),
        CheckSquare: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <polyline points="9 11 12 14 22 4" />
            <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" />
          </svg>
        ),
        Plus: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <path d="M5 12h14" />
            <path d="M12 5v14" />
          </svg>
        ),
        Trash: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <path d="M3 6h18" />
            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" />
            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
          </svg>
        ),
        Cloud: ({ className }) => (
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            strokeWidth="2"
            strokeLinecap="round"
            strokeLinejoin="round"
            className={className}
          >
            <path d="M17.5 19c0-3.037-2.463-5.5-5.5-5.5S6.5 15.963 6.5 19" />
            <path d="M4 19c0-5.523 4.477-10 10-10s10 4.477 10 10" />
            <path d="M12 19v-4" />
          </svg>
        ),
      };

      const Illustrations = {
        SkyFlower: ({ color, className }) => (
          <svg viewBox="0 0 200 200" className={className}>
            <g fill={color}>
              <ellipse
                cx="100"
                cy="40"
                rx="30"
                ry="50"
                transform="rotate(0 100 100)"
              />
              <ellipse
                cx="100"
                cy="40"
                rx="30"
                ry="50"
                transform="rotate(72 100 100)"
              />
              <ellipse
                cx="100"
                cy="40"
                rx="30"
                ry="50"
                transform="rotate(144 100 100)"
              />
              <ellipse
                cx="100"
                cy="40"
                rx="30"
                ry="50"
                transform="rotate(216 100 100)"
              />
              <ellipse
                cx="100"
                cy="40"
                rx="30"
                ry="50"
                transform="rotate(288 100 100)"
              />
            </g>
            <circle cx="100" cy="100" r="25" fill="#FFF" opacity="0.8" />
            <circle cx="100" cy="100" r="15" fill={color} opacity="0.5" />
          </svg>
        ),
        Jellyfish: ({ className }) => (
          <svg viewBox="0 0 100 120" className={className}>
            <path
              d="M10,40 Q50,-20 90,40"
              fill="#FF959D"
              stroke="#E87D85"
              strokeWidth="3"
            />
            <path d="M10,40 L90,40" fill="#FF959D" />
            <path
              d="M20,40 Q20,80 10,100"
              stroke="#FF959D"
              strokeWidth="4"
              fill="none"
            />
            <path
              d="M40,40 Q50,80 40,110"
              stroke="#FF959D"
              strokeWidth="4"
              fill="none"
            />
            <path
              d="M60,40 Q50,80 60,110"
              stroke="#FF959D"
              strokeWidth="4"
              fill="none"
            />
            <path
              d="M80,40 Q80,80 90,100"
              stroke="#FF959D"
              strokeWidth="4"
              fill="none"
            />
            <circle cx="30" cy="25" r="3" fill="#E87D85" />
            <circle cx="60" cy="15" r="4" fill="#E87D85" />
            <circle cx="75" cy="30" r="2" fill="#E87D85" />
          </svg>
        ),
        Pineapple: ({ className }) => (
          <svg viewBox="0 0 100 140" className={className}>
            <path d="M50,40 Q30,10 50,0 Q70,10 50,40" fill="#4CAF50" />
            <path d="M50,40 Q20,20 30,5 Q40,20 50,40" fill="#66BB6A" />
            <path d="M50,40 Q80,20 70,5 Q60,20 50,40" fill="#66BB6A" />
            <ellipse
              cx="50"
              cy="85"
              rx="35"
              ry="45"
              fill="#F7E35E"
              stroke="#E6D04A"
              strokeWidth="2"
            />
            <line
              x1="30"
              y1="60"
              x2="70"
              y2="110"
              stroke="#E6D04A"
              strokeWidth="1"
            />
            <line
              x1="70"
              y1="60"
              x2="30"
              y2="110"
              stroke="#E6D04A"
              strokeWidth="1"
            />
            <line
              x1="25"
              y1="80"
              x2="75"
              y2="80"
              stroke="#E6D04A"
              strokeWidth="1"
            />
            <line
              x1="25"
              y1="95"
              x2="75"
              y2="95"
              stroke="#E6D04A"
              strokeWidth="1"
            />
          </svg>
        ),
      };

      const BackgroundEffects = () => (
        <>
          <Illustrations.SkyFlower
            className="bg-illustration w-32 h-32 top-10 left-5 animate-spin-slow text-sb-teal"
            color="#20B2AA"
          />
          <Illustrations.SkyFlower
            className="bg-illustration w-48 h-48 bottom-20 right-10 animate-spin-reverse text-sb-purple"
            color="#B19CD9"
          />
          <Illustrations.SkyFlower
            className="bg-illustration w-24 h-24 top-1/3 right-1/4 animate-spin-slow text-sb-green"
            color="#A0D6B4"
          />
          <Illustrations.SkyFlower
            className="bg-illustration w-16 h-16 bottom-1/3 left-10 animate-spin-slow text-sb-pink"
            color="#FF959D"
          />

          <Illustrations.Jellyfish className="bg-illustration w-20 h-24 top-20 right-20 animate-float-slow opacity-80" />
          <Illustrations.Jellyfish className="bg-illustration w-16 h-20 bottom-40 left-1/3 animate-float-medium opacity-70" />
          <Illustrations.Jellyfish className="bg-illustration w-12 h-16 top-1/2 left-10 animate-float-fast opacity-60" />

          <Illustrations.Pineapple className="bg-illustration w-24 h-32 top-32 left-1/4 opacity-40 rotate-12" />

          <div className="bg-illustration top-0 left-0 animate-float-everywhere-1">
            <img
              src={CUSTOM_IMAGE_SRC}
              className="w-24 h-auto sticker-img opacity-90 animate-spin-fast"
              alt="Floating decoration 1"
              onError={(e) => {
                e.target.style.display = "none";
                console.log("ÂúñÁâáËºâÂÖ•Â§±ÊïóÔºåË´ãÁ¢∫Ë™çÊ™îÂêç");
              }}
            />
          </div>

          <div className="bg-illustration top-0 left-0 animate-float-everywhere-2">
            <img
              src={CUSTOM_IMAGE_SRC}
              className="w-32 h-auto sticker-img opacity-80 animate-spin-reverse-fast"
              alt="Floating decoration 2"
              onError={(e) => (e.target.style.display = "none")}
            />
          </div>

          <div className="bg-illustration top-0 left-0 animate-float-everywhere-3">
            <img
              src={CUSTOM_IMAGE_SRC}
              className="w-16 h-auto sticker-img opacity-70 animate-spin-super-fast"
              alt="Floating decoration 3"
              onError={(e) => (e.target.style.display = "none")}
            />
          </div>

          <div
            className="bg-illustration top-0 left-0 animate-float-everywhere-1"
            style={{ animationDelay: "-12s" }}
          >
            <img
              src={CUSTOM_IMAGE_SRC_2}
              className="w-20 h-auto sticker-img opacity-85 animate-spin-reverse-fast"
              alt="Floating decoration 4"
              onError={(e) => (e.target.style.display = "none")}
            />
          </div>

          <div
            className="bg-illustration top-0 left-0 animate-float-everywhere-3"
            style={{ animationDelay: "-7s" }}
          >
            <img
              src={CUSTOM_IMAGE_SRC_2}
              className="w-28 h-auto sticker-img opacity-80 animate-spin-fast"
              alt="Floating decoration 5"
              onError={(e) => (e.target.style.display = "none")}
            />
          </div>
        </>
      );

      const TRIP_DATA = {
        meta: {
          title: "Ê≤ñÁπ©‰∫îÂ§©ÂõõÂ§úË∑®Âπ¥‰πãÊóÖ",
          dates: "2025/12/30 (‰∫å) - 2026/01/03 (ÂÖ≠)",
          travelers: 2,
          rate: 0.21,
        },
        flights: [
          {
            type: "ÂéªÁ®ã",
            code: "IT230",
            date: "12/30",
            time: "06:35 - 08:55",
            seat: "5AB",
            from: "TPE",
            to: "OKA",
          },
          {
            type: "ÂõûÁ®ã",
            code: "IT233",
            date: "01/03",
            time: "21:30 - 22:05",
            seat: "28AB",
            from: "OKA",
            to: "TPE",
          },
        ],
        hotels: [
          {
            date: "12/30 (‰∫å)",
            name: "HOTEL NAHA CITY",
            area: "ÈÇ£Èú∏",
            price: 6881,
            currency: "JPY",
            note: "ÂÅúËªä ¬•1000/Êó•",
          },
          {
            date: "12/31 (‰∏â)",
            name: "HOTEL YUQUESTA AGARIMACHI",
            area: "ÈÇ£Èú∏",
            price: 8100,
            currency: "JPY",
            note: "Âê´Êó©È§ê",
          },
          {
            date: "01/01 (Âõõ)",
            name: "Ë∂ÖÁ¥öÈ£ØÂ∫ó (Super Hotel)",
            area: "ÂêçË≠∑",
            price: 5440,
            currency: "JPY",
            note: "ÊèêÊó©Âà∞ÈÅ∏ÊûïÈ†≠ (È†ê‰º∞ÂÉπÊ†º)",
          },
          {
            date: "01/02 (‰∫î)",
            name: "ÈÇ£Èú∏ÂÄ´ÂãÉÊúóÈ¢®Ê†ºÈ£ØÂ∫ó",
            area: "ÈÇ£Èú∏",
            price: 4710,
            currency: "JPY",
            note: "Rembrandt Style Naha",
          },
        ],
        itinerary: [
          {
            day: 1,
            date: "12/30 (‰∫å)",
            dateStr: "2025-12-30",
            events: [
              {
                time: "06:35",
                endTime: "08:55",
                title: "ÊäµÈÅîÈÇ£Èú∏Ê©üÂ†¥",
                type: "transport",
                location: "ÈÇ£Èú∏Ê©üÂ†¥",
                cost: 0,
                note: "Ëà™Áè≠ IT230",
              },
              {
                time: "09:30",
                endTime: "10:00",
                title: "ÁßüËªäÂèñËªä",
                type: "transport",
                location: "Brother Rent-A-Car („Éñ„É©„Ç∂„Éº„É¨„É≥„Çø„Ç´„Éº)",
                mapLocation: "Ê≤ñÁ∏ÑÁúåÈÇ£Ë¶áÂ∏ÇÁî∞Âéü3-1-8",
                cost: 25470,
                note: "È†êË®à1Â∞èÊôÇÔºåÂê´‰øùÈö™„ÄÇË≤ªÁî®Ôºö¬•25,470 (ÁèæÂ†¥‰ªò)",
                mapLink: "https://maps.app.goo.gl/zqpsHZkhGTZXQbEd7",
              },
              {
                time: "10:30",
                endTime: "11:30",
                title: "Êó©ÂçàÈ§êÔºöÂÆ¢ÁæéÂ§öÂíñÂï°",
                type: "meal",
                location: "ÂÆ¢ÁæéÂ§öÂíñÂï° Ê≤ñÁπ©Á≥∏ÊªøÂ∫ó",
                cost: 1000,
                note: "ÂÅúÁïôÁ¥Ñ1Â∞èÊôÇ",
              },
              {
                time: "12:00",
                endTime: "15:30",
                title: "Ê≤ñÁπ©‰∏ñÁïå - ÁéâÊ≥âÊ¥û",
                type: "activity",
                location: "Ê≤ñÁπ©‰∏ñÁïå ÊñáÂåñÁéãÂúã„ÉªÁéâÊ≥âÊ¥û",
                cost: 4000,
                note: "13:30 ÊØíËõáÁßÄÔºåKlookË≤∑‰∏ÄÈÄÅ‰∏ÄÔºåË≤ªÁî®¬•4,000",
              },
              {
                time: "15:40",
                endTime: "16:30",
                title: "Â•ßÊ≠¶Â≥∂ËßÄÂÖâ",
                type: "activity",
                location: "Â•ßÊ≠¶Â≥∂",
                cost: 500,
                note: "ÂÅúÁïôÁ¥Ñ1Â∞èÊôÇÔºåÂêÉÁÇ∏Áâ©",
              },
              {
                time: "17:00",
                endTime: "18:00",
                title: "Ricoland Okinawa",
                type: "activity",
                location: "Ricoland Okinawa",
                mapLocation: "Ricoland Okinawa",
                cost: 0,
                note: "Ê©üËªäÁî®ÂìÅÂ∫óÔºåÂÅúÁïô1Â∞èÊôÇ",
              },
              {
                time: "18:00",
                endTime: "19:00",
                title: "È£ØÂ∫ó Check-in",
                type: "transport",
                location: "HOTEL NAHA CITY",
                mapLocation: "1 Chome-4-5 Matsuo, Naha, Okinawa 900-0014Êó•Êú¨",
                cost: 6881,
                note: "ÂÅúËªäË≤ªÁî® ¬•1000/Êó•„ÄÇÂÇôË®ªÔºö10FÂê∏Ëè∏ÂçÄ",
              },
              {
                time: "18:40",
                endTime: "20:30",
                title: "ÊôöÈ§êÔºöBuchi Kumojiten (ÁÉ§ËÇâ)",
                type: "meal",
                location: "Yakiniku Buchi Kumoji (ÁáíËÇâ Buchi ‰πÖËåÇÂú∞Â∫ó)",
                mapLocation: "Yakiniku Buchi Kumoji",
                cost: 5000,
                note: "„ÄêÂ∑≤È†êË®Ç„Äë18:40„ÄÇÂøÖÈªûÔºöÁîüÁâõËÇâËµ§Ë∫´„ÄÅÂúüÈçãÈ£Ø„ÄÇ(ÊèêÈÜíÔºöË®Ç‰∫ÜÂÖ©ÂÆ∂ÔºåÈúÄÈÅ∏‰∏ÄÂÆ∂)",
              },
            ],
          },
          {
            day: 2,
            date: "12/31 (‰∏â)",
            dateStr: "2025-12-31",
            events: [
              {
                time: "07:00",
                endTime: "07:30",
                title: "Êó©È§êÔºöÁ¶èÂä©ÁéâÂ≠êÁáí Êàñ Ë±¨ËÇâËõãÈ£ØÁ≥∞",
                type: "meal",
                location: "ÁâßÂøóÂ∏ÇÂ†¥Âë®ÈÇä",
                cost: 1000,
                note: "Ëµ∞Ë∑Ø10ÂàÜÈêò„ÄÇÁ¶èÂä©7:30Èñã / È£ØÁ≥∞7:00Èñã",
              },
              {
                time: "09:00",
                endTime: "13:00",
                title: "Parco City ÈÄõË°ó",
                type: "activity",
                location: "Êµ¶Ê∑ªË•øÊµ∑Â≤∏ PARCO CITY",
                cost: 5000,
                note: "ÂÅúËªäÂÖçË≤ª„ÄÇÈñãËªäÁ¥Ñ20ÂàÜÈêò",
              },
              {
                time: "13:30",
                endTime: "14:30",
                title: "ÂçàÈ§êÔºöÊïòÊïòËãëÁáíËÇâ",
                type: "meal",
                location: "ÊïòÊïòËãë Ê≤ñÁπ©Êµ¶Ê∑ªPARCO CITYÂ∫ó",
                cost: 3000,
                note: "„ÄêÂ∑≤È†êË®Ç„ÄëÈ†êÁ¥Ñ 13:30",
              },
              {
                time: "15:00",
                endTime: "16:00",
                title: "Êº´Áï´ÂÄâÂ∫´ / Ê∏ØÂ∑ùÂ§ñ‰∫∫‰ΩèÂÆÖ",
                type: "activity",
                location: "Ê∏ØÂ∑ùÂ§ñ‰∫∫‰ΩèÂÆÖË°ó",
                cost: 1500,
                note: "Êµ¶Ê∑ªÂçÄ„ÄÇÈñãËªäÁ¥Ñ9ÂàÜÈêò",
              },
              {
                time: "18:30",
                endTime: "19:00",
                title: "È£ØÂ∫ó Check-in",
                type: "transport",
                location: "HOTEL YUQUESTA AGARIMACHI",
                mapLocation: "7-22 Higashimachi, Naha, Okinawa 900-0034Êó•Êú¨",
                cost: 0,
                note: "ÈúÄÊâæÂÅúËªäÂ†¥ÔºåÁõ°ÈáèÊó©Âõû",
              },
              {
                time: "20:00",
                endTime: "21:30",
                title: "ÊôöÈ§êÔºöLITOR",
                type: "meal",
                location: "LITOR",
                cost: 2000,
                note: "„ÄêÂ∑≤È†êË®Ç„ÄëÈ†êÁ¥Ñ 20:00„ÄÇ‰∏çËÉΩÈÅ≤Âà∞ÔºÅ(ÈÅ≤Âà∞Áï∂Â§©ÈÄÄË≤ª‰πüÊâ£Èå¢)",
              },
              {
                time: "22:00",
                endTime: "00:30",
                title: "Ë∑®Âπ¥Ê¥ªÂãïÔºöChurasun 6",
                type: "activity",
                location: "Churasun 6",
                mapLocation: "Churasun 6, Naha",
                cost: 9000,
                note: "„ÄêÂ∑≤È†êË®Ç„ÄëÈ†êÁ¥Ñ 22:00 (22:30 ÈñãÂßã)„ÄÇË≤ªÁî®¬•9,000",
              },
            ],
          },
          {
            day: 3,
            date: "01/01 (Âõõ)",
            dateStr: "2026-01-01",
            events: [
              {
                time: "08:00",
                endTime: "08:30",
                title: "Êó©È§êÔºöA&W Êº¢Â†°",
                type: "meal",
                location: "A&W ÁâßÊ∏ØÂ∫ó",
                cost: 1500,
                note: "ÂÖÉÊó¶Êó©È§ê",
              },
              {
                time: "09:00",
                endTime: "09:30",
                title: "Ëê¨Â∫ßÊØõ",
                type: "activity",
                location: "Ëê¨Â∫ßÊØõ",
                cost: 200,
                note: "ÂèØ‰ª•‰∏çÂéªÔºåÂèØËÉΩÊúÉÂæàË∂ïÔºå‰∏çÁÑ∂Ë¶ÅÊõ¥Êó©Âá∫ÈñÄ„ÄÇË≤ªÁî®¬•200",
              },
              {
                time: "12:00",
                endTime: "12:30",
                title: "ÂçàÈ§êÔºöË®±Áî∞‰ºëÊÅØÁ´ô Êàñ CAMEL SANDWICH",
                type: "meal",
                location: "Ë®±Áî∞‰ºëÊÅØÁ´ô / CAMEL SANDWICH",
                mapLocation: "CAMEL SANDWICH",
                cost: 1500,
                note: "Èö®ÊÑèÂêÉÊàñÂêÉ‰∏âÊòéÊ≤ª",
              },
              {
                time: "14:00",
                endTime: "17:00",
                title: "ÁæéÈ∫óÊµ∑Ê∞¥ÊóèÈ§®",
                type: "activity",
                location: "Ê≤ñÁπ©ÁæéÈ∫óÊµ∑Ê∞¥ÊóèÈ§®",
                cost: 4360,
                note: "„ÄêÊîªÁï•„ÄëP7ÂåóÂÅúËªäÂ†¥ÊúÄËøë„ÄÇ13:20ÊéíÈöäÈ§µÊµ∑Ë±ö„ÄÅ14:00È§µÊµ∑Èæú„ÄÅ15:00ÈØ®ÈØäÈ§µÈ£ü(ÈªëÊΩÆ‰πãÊµ∑)„ÄÇË≤ªÁî®¬•4,360",
              },
              {
                time: "18:00",
                endTime: "18:30",
                title: "È£ØÂ∫ó Check-in",
                type: "transport",
                location: "Super Hotel Nago",
                mapLocation: "Super Hotel Okinawa Nago",
                cost: 5440,
                note: "ÊèêÊó©Âà∞ÈÅ∏ÊûïÈ†≠„ÄÇË∂ÖÁ¥öÈ£ØÂ∫ó(ÂêçË≠∑)",
              },
              {
                time: "19:00",
                endTime: "21:00",
                title: "ÊôöÈ§êÔºöÁôæÂπ¥Âè§ÂÆ∂ Â§ßÂÆ∂ (ÈòøÂè§Ë±¨)",
                type: "meal",
                location: "Ufuya (ÁôæÂπ¥Âè§ÂÆ∂ Â§ßÂÆ∂)",
                mapLocation: "Ufuya, Nago",
                cost: 4880,
                note: "„ÄêÂ∑≤È†êË®Ç„ÄëÈ†êÁ¥Ñ 19:30",
              },
            ],
          },
          {
            day: 4,
            date: "01/02 (‰∫î)",
            dateStr: "2026-01-02",
            events: [
              {
                time: "07:00",
                endTime: "09:30",
                title: "Êó©È§êÔºöÈ£ØÂ∫óÊó©È§ê",
                type: "meal",
                location: "Super Hotel Nago",
                cost: 0,
                note: "",
              },
              {
                time: "09:00",
                endTime: "10:00",
                title: "Âè§ÂÆáÂà©Êµ∑Ê¥ãÂ°î",
                type: "activity",
                location: "Âè§ÂÆáÂà©Êµ∑Ê¥ãÂ°î",
                cost: 2000,
                note: "Ê¨£Ë≥ûÈ¢®ÊôØ„ÄÇË≤ªÁî®¬•2,000",
              },
              {
                time: "11:30",
                endTime: "12:00",
                title: "ÂçàÈ§êÔºöÂè§ÂÆáÂà©Ëù¶Ëù¶È£Ø",
                type: "meal",
                location: "Kouri Shrimp",
                mapLocation: "Kouri Shrimp Wagon",
                cost: 2160,
                note: "ÈôÑËøëÈÇÑÊúâ NoBi",
              },
              {
                time: "13:30",
                endTime: "14:30",
                title: "ÁæéÂúãÊùë",
                type: "activity",
                location: "ÁæéÂúãÊùë",
                mapLocation: "American Village Okinawa",
                cost: 1500,
                note: "ÈÄõË°óÊãçÁÖß",
              },
              {
                time: "15:00",
                endTime: "16:00",
                title: "Ê∞∏Êó∫Â§¢Ê®ÇÂüé (Aeon Mall)",
                type: "activity",
                location: "AEON MALL Okinawa Rycom",
                cost: 5000,
                note: "Â§ßÂûãË≥ºÁâ©‰∏≠ÂøÉ",
              },
              {
                time: "19:00",
                endTime: "20:00",
                title: "ÊôöÈ§êÔºöÂÇëÂÖãÁâõÊéí",
                type: "meal",
                location: "Jack's Steak House (ÂÇëÂÖãÁâõÊéí ÈÇ£Èú∏Â∫ó)",
                mapLocation: "Jack's Steak House Naha Okinawa",
                cost: 3000,
                note: "ÂèØ‰ª•19:00ÂÖàÂéªÂêÉÔºåÂÜç Check-in Ëµ∞ÂõûÂéª",
              },
              {
                time: "19:30",
                endTime: "21:00",
                title: "È£ØÂ∫ó Check-in",
                type: "transport",
                location: "Rembrandt Style Naha",
                mapLocation: "Rembrandt Style Naha",
                cost: 4710,
                note: "ÈÇ£Èú∏ÂÄ´ÂãÉÊúóÈ¢®Ê†ºÈ£ØÂ∫ó",
              },
            ],
          },
          {
            day: 5,
            date: "01/03 (ÂÖ≠)",
            dateStr: "2026-01-03",
            events: [
              {
                time: "07:00",
                endTime: "09:30",
                title: "Êó©È§êÔºöÈ£ØÂ∫óÊó©È§ê",
                type: "meal",
                location: "Rembrandt Style Naha",
                cost: 0,
                note: "",
              },
              {
                time: "09:30",
                endTime: "10:00",
                title: "Ê≥¢‰∏äÂÆÆ",
                type: "activity",
                location: "Ê≥¢‰∏äÂÆÆ",
                cost: 0,
                note: "ÂèÉÊãúÊãçÁÖß",
              },
              {
                time: "10:00",
                endTime: "11:00",
                title: "Êó©ÂçàÈ§êÔºöÂπ∏Á¶èÈ¨ÜÈ§Ö",
                type: "meal",
                location: "A Happy Pancake Umikaji Terrace",
                cost: 2000,
                note: "Ë∑ØÈÇäÂÅúËªäÂÖçË≤ªÔºåÈúÄÊéíÈöä",
              },
              {
                time: "12:00",
                endTime: "13:00",
                title: "Ë≥ºÁâ©Ôºöiias Ê≤ñÁπ©Ë±êÂ¥é",
                type: "activity",
                location: "iias Okinawa Toyosaki",
                cost: 5000,
                note: "ÊúÄÂæåÊé°Ë≤∑",
              },
              {
                time: "16:30",
                endTime: "17:00",
                title: "Ë≥ºÁâ©ÔºöWorkman",
                type: "activity",
                location: "Workman Plus",
                cost: 5000,
                note: "Ê©üËÉΩÊúçÈ£æ",
              },
              {
                time: "17:00",
                endTime: "18:00",
                title: "ÈÇÑËªä/ÂâçÂæÄÊ©üÂ†¥",
                type: "transport",
                location: "ÈÇ£Èú∏Ê©üÂ†¥",
                cost: 0,
                note: "ÈúÄÈ†êÁïôÈÇÑËªäÊôÇÈñì",
              },
              {
                time: "21:30",
                endTime: "22:05",
                title: "ËøîÁ®ãËà™Áè≠",
                type: "transport",
                location: "IT233",
                cost: 0,
                note: "21:30 Ëµ∑È£õ",
              },
            ],
          },
        ],
        budget: [
          { item: "Ê©üÁ•®", twd: 17902, note: "Ë≤∑ / ÈÉΩ‰ªò‰∫Ü" },
          { item: "12/30 ÂúãÈöõÈÄö‰ΩèÂÆø", twd: 1380, note: "Ë≤∑ / ¬•6,881 (Ë≥Ä)" },
          { item: "12/31 ÂúãÈöõÈÄö‰ΩèÂÆø", twd: 1620, note: "Ë≤∑ / ¬•8,100 (Ë≥Ä)" },
          { item: "1/1 ÂêçË≠∑‰ΩèÂÆø", twd: 2176, note: "Ë≤∑ / ¬•10,552 (Ë≥Ä)" },
          { item: "1/2 ÂúãÈöõÈÄö‰ΩèÂÆø", twd: 1884, note: "Ë≤∑ / ¬•9,396 (Ë≥Ä)" },
          { item: "ÁßüËªä 5Â§©ÂõõÂ§ú", twd: 5094, note: "È†êË®Ç / ¬•25,470 (ÁèæÂ†¥‰ªò)" },
          { item: "Êó•Êú¨Ë≠ØÊñáÈßïÈßõ", twd: 256, note: "Ë≤∑ / ÈÉΩ‰ªò‰∫Ü" },
          { item: "ÈñÄÁ•® ÁæéÈ∫óÊµ∑Ê¥ãÈ§®", twd: 874, note: "Êú™Ë≤∑ / ¬•4,360 (Ë≥Ä)" },
          {
            item: "ÈñÄÁ•® ÁéâÊ≥âÊ¥û",
            twd: 375,
            note: "Ë≤∑ / ¬•4,000 (KlookË≤∑‰∏ÄÈÄÅ‰∏Ä)",
          },
          { item: "ÈñÄÁ•® Âè§ÂÆáÂà©Â≥∂", twd: 375, note: "Ë≤∑ / ¬•2,000 (Ë≥Ä)" },
          { item: "ÈñÄÁ•® Ëê¨Â∫ßÊØõ", twd: 40, note: "Êú™Ë≤∑ / ¬•200 (ÁèæÂ†¥‰ªò)" },
          {
            item: "ÈñÄÁ•® Churasun 6",
            twd: 1800,
            note: "È†êË®Ç / ¬•9,000 (ÁèæÂ†¥‰ªò)",
          },
          { item: "ÊóÖÈÅäÈö™", twd: 1390, note: "Ë≤∑ / 12/22‰ªòÈå¢" },
          { item: "esim", twd: 320, note: "Êú™Ë≤∑ / ‰∏Ä‰∫∫300Â∑¶Âè≥" },
          { item: "Âä†Ê≤πÈå¢(Âê´ÂÅúËªäË≤ª)", twd: 2000, note: "È†ê‰º∞ / ¬•10,000" },
          { item: "Ê©üÂ†¥‰æÜÂõûËªäË≥á", twd: 930, note: "È†ê‰º∞ / ÂñÆÁ®ãÈ´òÈêµË®ÇÁ•®‰∫Ü430" },
          { item: "È£≤È£ü", twd: 8500, note: "È†ê‰º∞" },
          { item: "Áñ´Ëãó", twd: 2000, note: "Ë≤∑" },
        ],
      };

      const CountdownTimer = ({ targetDateStr, targetTimeStr }) => {
        const [timeLeft, setTimeLeft] = useState("");

        useEffect(() => {
          const calculateTimeLeft = () => {
            const target = new Date(`${targetDateStr}T${targetTimeStr}:00`);
            const now = new Date();
            const diff = target - now;

            if (diff <= 0) return "ÈÄ≤Ë°å‰∏≠ üî•";

            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / 1000 / 60) % 60);
            const seconds = Math.floor((diff / 1000) % 60);

            if (days > 0) return `${days}Â§© ${hours}ÊôÇ ${minutes}ÂàÜ`;
            return `${hours}ÊôÇ ${minutes}ÂàÜ ${seconds}Áßí`;
          };

          setTimeLeft(calculateTimeLeft());
          const timer = setInterval(
            () => setTimeLeft(calculateTimeLeft()),
            1000
          );
          return () => clearInterval(timer);
        }, [targetDateStr, targetTimeStr]);

        return (
          <div className="flex items-center space-x-2 bg-sb-pink text-white px-3 py-1.5 rounded-full shadow-cartoon border-2 border-white text-sm font-bold animate-pulse">
            <Icons.Timer className="w-5 h-5" />
            <span>
              ÂÄíÊï∏Ôºö<span>{timeLeft}</span>
            </span>
          </div>
        );
      };

      const EventItem = ({ event, isNext, eventId }) => {
        const [isMapVisible, setIsMapVisible] = useState(false);

        const queryLocation = event.mapLocation || event.location;
        const mapQuery = encodeURIComponent(queryLocation);
        const mapUrl = `https://maps.google.com/maps?q=${mapQuery}&t=&z=15&ie=UTF8&iwloc=&output=embed`;
        const externalMapUrl =
          event.mapLink ||
          `https://www.google.com/maps/search/?api=1&query=${mapQuery}`;

        const getTypeStyle = (type) => {
          switch (type) {
            case "meal":
              return "bg-sb-yellow border-sb-brown text-sb-brown";
            case "transport":
              return "bg-gray-100 border-gray-400 text-gray-600";
            default:
              return "bg-sb-teal border-white text-white";
          }
        };

        const getTypeLabel = (type) => {
          switch (type) {
            case "meal":
              return "ÁæéÂë≥ËüπÂ†°";
            case "transport":
              return "ÁßªÂãï‰∏≠";
            default:
              return "ÂéªÁé©ËÄç";
          }
        };

        return (
          <div
            id={eventId}
            className={`relative pl-8 group ${isNext ? "z-10" : ""}`}
          >
            <div className="absolute left-3 top-0 bottom-0 w-1 bg-white/50 border-x border-white/20 group-last:bottom-auto group-last:h-8"></div>

            <div
              className={`absolute left-0 top-6 w-7 h-7 rounded-full border-2 border-white shadow-cartoon flex items-center justify-center z-10 transition-transform ${
                isNext ? "bg-sb-pink scale-125" : "bg-sb-yellow"
              }`}
            >
              {event.type === "meal" ? (
                <Icons.Utensils className="w-3 h-3 text-sb-brown" />
              ) : event.type === "transport" ? (
                <Icons.Car className="w-3 h-3 text-sb-brown" />
              ) : (
                <Icons.MapPin className="w-3 h-3 text-sb-brown" />
              )}
            </div>

            <div
              className={`mb-6 p-5 rounded-3xl border-4 transition-all duration-300 relative ${
                isNext
                  ? "bg-sb-yellow border-sb-brown shadow-cartoon transform scale-[1.02]"
                  : "bg-white border-white hover:border-sb-yellow hover:shadow-cartoon-hover"
              }`}
            >
              <div
                className={`absolute -top-2 -right-2 w-4 h-4 bg-sb-blue rounded-full border border-white opacity-50 ${
                  isNext ? "block" : "hidden"
                }`}
              ></div>

              <div className="flex flex-col sm:flex-row sm:items-start justify-between gap-4 relative z-10">
                <div className="flex-1">
                  <div className="flex items-center justify-between sm:justify-start gap-3 mb-2">
                    <span
                      className={`font-mono text-sm font-black px-3 py-1 rounded-full border-2 ${
                        isNext
                          ? "bg-white text-sb-brown border-sb-brown"
                          : "bg-sb-blue/20 text-sb-brown border-transparent"
                      }`}
                    >
                      <span>{event.time}</span>
                    </span>
                    <div className={isNext ? "block" : "hidden"}>
                      <CountdownTimer
                        targetDateStr={event.dateStr}
                        targetTimeStr={event.time}
                      />
                    </div>
                  </div>

                  <h4
                    className={`text-xl font-black mb-2 ${
                      isNext ? "text-sb-brown" : "text-gray-700"
                    }`}
                  >
                    <span>{event.title}</span>
                  </h4>

                  <div className="flex flex-wrap gap-2 text-sm font-bold mb-3">
                    <span
                      className={`inline-flex items-center px-3 py-1 rounded-full border-2 text-xs ${getTypeStyle(
                        event.type
                      )}`}
                    >
                      <span>{getTypeLabel(event.type)}</span>
                    </span>
                    <div className="flex items-center px-3 py-1 rounded-full bg-white/50 border-2 border-white/50 text-gray-500">
                      <span className="mr-1.5">
                        <Icons.MapPin className="w-5 h-5" />
                      </span>
                      <span>{event.location}</span>
                    </div>
                  </div>

                  {event.note && (
                    <div
                      className={`flex items-start text-sm p-3 rounded-2xl border-2 ${
                        isNext
                          ? "bg-white/50 border-sb-brown/20 text-sb-brown"
                          : "bg-sb-sand border-gray-100 text-gray-500"
                      }`}
                    >
                      <span className="mr-2 mt-0.5 text-sb-pink">
                        <Icons.Info className="w-4 h-4" />
                      </span>
                      <span className="font-medium">
                        <span>{event.note}</span>
                      </span>
                    </div>
                  )}
                </div>

                <div className="flex flex-row sm:flex-col items-center sm:items-end justify-between sm:justify-start gap-3 min-w-[100px]">
                  {event.cost > 0 && (
                    <div className="text-right bg-white/80 px-3 py-1 rounded-xl border-2 border-white shadow-sm">
                      <span className="text-[10px] text-gray-400 uppercase font-black tracking-wider">
                        <span>È†ê‰º∞</span>
                      </span>
                      <div className="font-mono text-lg font-black text-sb-plankton">
                        <span>¬•</span>
                        <span>{event.cost.toLocaleString()}</span>
                      </div>
                    </div>
                  )}
                  <button
                    onClick={() => setIsMapVisible(!isMapVisible)}
                    className={`text-sm font-bold flex items-center px-4 py-2 rounded-full border-2 shadow-cartoon-hover transition-all active:translate-y-1 active:shadow-none ${
                      isMapVisible
                        ? "bg-sb-red text-white border-sb-red"
                        : "bg-sb-blue text-white border-white hover:bg-teal-400"
                    }`}
                  >
                    <span className="mr-1.5">
                      <Icons.Map className="w-4 h-4" />
                    </span>
                    <span>{isMapVisible ? "Êî∂Ëµ∑" : "Âú∞Âúñ"}</span>
                  </button>
                </div>
              </div>

              <div
                className={`mt-4 rounded-2xl overflow-hidden border-4 border-white shadow-cartoon bg-sb-sand animate-fade-in relative ${
                  isMapVisible ? "block" : "hidden"
                }`}
              >
                {isMapVisible && (
                  <iframe
                    width="100%"
                    height="280"
                    frameBorder="0"
                    scrolling="no"
                    marginHeight="0"
                    marginWidth="0"
                    src={mapUrl}
                    title={`Map of ${event.location}`}
                    className="w-full block"
                  ></iframe>
                )}
                <div className="bg-white py-2 px-3 text-xs flex justify-end border-t-2 border-gray-100 font-bold">
                  <a
                    href={externalMapUrl}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="flex items-center text-sb-blue hover:text-sb-teal transition-colors"
                  >
                    <span>ÈñãÂïü Google Maps</span>{" "}
                    <span className="ml-1">
                      <Icons.ExternalLink className="w-4 h-4" />
                    </span>
                  </a>
                </div>
              </div>
            </div>
          </div>
        );
      };

      const TodoView = () => {
        const [todos, setTodos] = useState([]);
        const [input, setInput] = useState("");
        const [user, setUser] = useState(null);
        const [isFirebaseMode, setIsFirebaseMode] = useState(false);

        // ËôïÁêÜÁôªÂÖ•
        const handleLogin = async () => {
          if (!window.fb) return;
          const { auth, signInWithPopup, googleProvider } = window.fb;
          try {
            await signInWithPopup(auth, googleProvider);
          } catch (error) {
            console.error("Login failed:", error);
          }
        };

        // ËôïÁêÜÁôªÂá∫
        const handleLogout = async () => {
          if (!window.fb) return;
          const { auth, signOut } = window.fb;
          try {
            await signOut(auth);
            setTodos([]);
          } catch (error) {
            console.error("Logout failed:", error);
          }
        };

        // ÂàùÂßãÂåñËàáÁõ£ËÅΩÁôªÂÖ•ÁãÄÊÖã
        useEffect(() => {
          if (window.fb) {
            setIsFirebaseMode(true);
            const { auth, onAuthStateChanged } = window.fb;
            const unsubscribe = onAuthStateChanged(auth, (currentUser) => {
              setUser(currentUser);
            });
            return () => unsubscribe();
          } else {
            const saved = localStorage.getItem("okinawa_todos");
            if (saved) setTodos(JSON.parse(saved));
          }
        }, []);

        // Áõ£ËÅΩ Firebase Ë≥áÊñôÂ∫´ (ÈúÄÁôªÂÖ•ÂæåÊâçÂü∑Ë°å)
        useEffect(() => {
          if (!isFirebaseMode || !user || !window.fb) return;

          const { db, appId, collection, onSnapshot } = window.fb;
          const todosCol = collection(
            db,
            "artifacts",
            appId,
            "public",
            "data",
            "todos"
          );

          const unsubscribe = onSnapshot(
            todosCol,
            (snapshot) => {
              const loaded = snapshot.docs.map((doc) => ({
                id: doc.id,
                ...doc.data(),
              }));
              loaded.sort((a, b) => (a.createdAt || 0) - (b.createdAt || 0));
              setTodos(loaded);
            },
            (err) => {
              console.error("Fetch todos error:", err);
            }
          );

          return () => unsubscribe();
        }, [isFirebaseMode, user]);

        const addTodo = async () => {
          if (!input.trim()) return;
          if (isFirebaseMode && window.fb) {
            if (!user) {
              alert("Ë´ãÂÖàÁôªÂÖ•ÊâçËÉΩÊñ∞Â¢ûÈ†ÖÁõÆÔºÅ");
              return;
            }
            const { db, appId, collection, addDoc } = window.fb;
            try {
              const todosCol = collection(
                db,
                "artifacts",
                appId,
                "public",
                "data",
                "todos"
              );
              await addDoc(todosCol, {
                text: input,
                done: false,
                createdAt: Date.now(),
                author: user.displayName,
                uid: user.uid,
              });
              setInput("");
            } catch (e) {
              console.error("Add failed", e);
            }
          } else {
            const newItem = {
              id: Date.now(),
              text: input,
              done: false,
              createdAt: Date.now(),
            };
            setTodos([...todos, newItem]);
            setInput("");
          }
        };

        const toggleTodo = async (id, currentStatus) => {
          if (isFirebaseMode && window.fb) {
            const { db, appId, doc, updateDoc } = window.fb;
            try {
              const todoRef = doc(
                db,
                "artifacts",
                appId,
                "public",
                "data",
                "todos",
                id
              );
              await updateDoc(todoRef, { done: !currentStatus });
            } catch (e) {
              console.error(e);
            }
          } else {
            setTodos(
              todos.map((todo) =>
                todo.id === id ? { ...todo, done: !todo.done } : todo
              )
            );
          }
        };

        const deleteTodo = async (id) => {
          if (isFirebaseMode && window.fb) {
            const { db, appId, doc, deleteDoc } = window.fb;
            try {
              const todoRef = doc(
                db,
                "artifacts",
                appId,
                "public",
                "data",
                "todos",
                id
              );
              await deleteDoc(todoRef);
            } catch (e) {
              console.error(e);
            }
          } else {
            setTodos(todos.filter((todo) => todo.id !== id));
          }
        };

        return (
          <div className="max-w-2xl mx-auto px-4">
            <div className="bg-white rounded-[40px] shadow-cartoon border-4 border-white overflow-hidden">
              <div className="bg-sb-teal p-6 border-b-4 border-white flex justify-between items-center">
                <h3 className="font-black text-white text-xl tracking-wider flex items-center">
                  <span className="bg-white/20 p-2 rounded-xl mr-3">
                    <Icons.CheckSquare className="w-6 h-6" />
                  </span>
                  <span>Ë°åÂâçÊ∫ñÂÇôÊ∏ÖÂñÆ</span>
                </h3>

                <div className="flex items-center gap-3">
                  {isFirebaseMode &&
                    (user ? (
                      <div className="flex items-center gap-2 bg-black/10 px-3 py-1.5 rounded-full border border-white/20">
                        {user.photoURL && (
                          <img
                            src={user.photoURL}
                            className="w-6 h-6 rounded-full border border-white"
                            alt="avatar"
                          />
                        )}
                        <span className="text-white text-xs font-bold hidden sm:inline">
                          {user.displayName}
                        </span>
                        <button
                          onClick={handleLogout}
                          className="text-xs bg-white text-sb-teal px-2 py-1 rounded-lg font-bold ml-1 hover:bg-gray-100"
                        >
                          ÁôªÂá∫
                        </button>
                      </div>
                    ) : (
                      <button
                        onClick={handleLogin}
                        className="flex items-center gap-2 bg-white text-sb-teal px-4 py-2 rounded-full font-bold text-sm shadow-sm hover:bg-gray-50 transition-colors"
                      >
                        <span className="w-2 h-2 rounded-full bg-gray-300"></span>
                        <span>Google ÁôªÂÖ•</span>
                      </button>
                    ))}
                </div>
              </div>

              {!user && isFirebaseMode ? (
                <div className="p-12 text-center text-gray-400 font-bold bg-gray-50">
                  <div className="mb-4 text-6xl">üîí</div>
                  <p>Ë´ãÂÖàÁôªÂÖ• Google Â∏≥Ëôü</p>
                  <p className="text-sm opacity-70 mt-2">
                    ÊâçËÉΩÊü•ÁúãËàáÁ∑®ËºØÂÖ±ÂêåÊ∏ÖÂñÆÂñîÔºÅ
                  </p>
                </div>
              ) : (
                <div className="p-6">
                  <div className="flex gap-2 mb-6">
                    <input
                      type="text"
                      value={input}
                      onChange={(e) => setInput(e.target.value)}
                      onKeyPress={(e) => e.key === "Enter" && addTodo()}
                      placeholder="Êñ∞Â¢ûÂæÖËæ¶‰∫ãÈ†Ö..."
                      className="flex-1 bg-gray-50 border-2 border-gray-200 rounded-xl px-4 py-3 font-bold text-gray-700 focus:outline-none focus:border-sb-teal focus:ring-2 focus:ring-sb-teal/20"
                    />
                    <button
                      onClick={addTodo}
                      className="bg-sb-teal text-white px-4 rounded-xl font-bold border-2 border-white shadow-sm hover:bg-teal-500 transition-colors"
                    >
                      <Icons.Plus className="w-5 h-5" />
                    </button>
                  </div>

                  <div className="space-y-3">
                    {todos.length === 0 && (
                      <div className="text-center text-gray-400 py-8 font-bold">
                        <span>Ê∏ÖÂñÆÁõÆÂâçÊòØÁ©∫ÁöÑ ‚ú®</span>
                      </div>
                    )}
                    {todos.map((todo) => (
                      <div
                        key={todo.id}
                        className={`flex items-center justify-between p-4 rounded-2xl border-2 transition-all ${
                          todo.done
                            ? "bg-gray-50 border-gray-100"
                            : "bg-white border-sb-blue/20 hover:border-sb-blue"
                        }`}
                      >
                        <div
                          className="flex items-center gap-3 flex-1 cursor-pointer"
                          onClick={() => toggleTodo(todo.id, todo.done)}
                        >
                          <div
                            className={`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-colors ${
                              todo.done
                                ? "bg-sb-teal border-sb-teal text-white"
                                : "border-gray-300 bg-white"
                            }`}
                          >
                            {todo.done && (
                              <Icons.CheckSquare className="w-4 h-4" />
                            )}
                          </div>
                          <div className="flex flex-col">
                            <span
                              className={`font-bold text-lg transition-all ${
                                todo.done
                                  ? "text-gray-400 line-through"
                                  : "text-gray-700"
                              }`}
                            >
                              {todo.text}
                            </span>
                            {todo.author && (
                              <span className="text-[10px] text-gray-400 font-bold">
                                by {todo.author}
                              </span>
                            )}
                          </div>
                        </div>
                        <button
                          onClick={() => deleteTodo(todo.id)}
                          className="text-gray-400 hover:text-sb-red p-2 rounded-lg hover:bg-red-50 transition-colors"
                        >
                          <Icons.Trash className="w-5 h-5" />
                        </button>
                      </div>
                    ))}
                  </div>
                </div>
              )}
            </div>
          </div>
        );
      };

      const Tabs = ({ activeTab, onTabChange }) => {
        const tabs = [
          { id: "itinerary", label: "Ë°åÁ®ãË°®", icon: Icons.Calendar },
          { id: "logistics", label: "‰ΩèÂÆøËàáËà™Áè≠", icon: Icons.Hotel },
          { id: "budget", label: "È†êÁÆóË°®", icon: Icons.Wallet },
          { id: "todo", label: "Ë°åÂâçÊ∫ñÂÇô", icon: Icons.CheckSquare },
        ];

        return (
          <div className="flex justify-center mb-8 px-4 overflow-x-auto scrollbar-hide">
            <div className="flex space-x-2 sm:space-x-4 bg-white/30 p-2 rounded-full backdrop-blur-sm border-2 border-white/40">
              {tabs.map((tab) => (
                <button
                  key={tab.id}
                  onClick={() => onTabChange(tab.id)}
                  className={`flex items-center px-4 sm:px-6 py-3 rounded-full text-sm sm:text-base font-bold transition-all border-2 shadow-cartoon-hover whitespace-nowrap ${
                    activeTab === tab.id
                      ? "bg-sb-pink text-white border-white transform -translate-y-1"
                      : "bg-white text-gray-400 border-transparent hover:bg-sb-yellow hover:text-sb-brown hover:border-white"
                  }`}
                >
                  <span className="mr-2 hidden sm:inline">
                    <tab.icon className="w-6 h-6" />
                  </span>
                  <span>{tab.label}</span>
                </button>
              ))}
            </div>
          </div>
        );
      };

      const ItineraryView = ({ data }) => {
        const [activeDay, setActiveDay] = useState(data[0]?.day || 1);
        const [nextEventId, setNextEventId] = useState(null);

        useEffect(() => {
          const now = new Date();
          let target = null;
          let minDiff = Infinity;

          for (const day of data) {
            for (let idx = 0; idx < day.events.length; idx++) {
              const event = day.events[idx];
              const start = new Date(`${day.dateStr}T${event.time}:00`);
              let end;
              if (event.endTime) {
                const [endH, endM] = event.endTime.split(":").map(Number);
                const [startH, startM] = event.time.split(":").map(Number);
                let endDateStr = day.dateStr;
                if (endH < startH) {
                  const d = new Date(day.dateStr);
                  d.setDate(d.getDate() + 1);
                  endDateStr = d.toISOString().split("T")[0];
                }
                end = new Date(`${endDateStr}T${event.endTime}:00`);
              } else {
                end = new Date(start.getTime() + 60 * 60 * 1000);
              }

              if (now >= start && now <= end) {
                target = { day: day.day, idx, type: "ongoing" };
                break;
              }
            }
            if (target) break;
          }

          if (!target) {
            for (const day of data) {
              for (let idx = 0; idx < day.events.length; idx++) {
                const event = day.events[idx];
                const start = new Date(`${day.dateStr}T${event.time}:00`);
                const diff = start - now;
                if (diff > 0 && diff < minDiff) {
                  minDiff = diff;
                  target = { day: day.day, idx, type: "upcoming" };
                }
              }
            }
          }

          if (target) {
            setNextEventId(target);
            setActiveDay(target.day);
            setTimeout(() => {
              const element = document.getElementById(
                `event-${target.day}-${target.idx}`
              );
              if (element) {
                element.scrollIntoView({ behavior: "smooth", block: "center" });
              }
            }, 500);
          }
        }, [data]);

        const currentDay = data.find((d) => d.day === activeDay) || data[0];

        return (
          <div className="max-w-3xl mx-auto">
            <div className="flex overflow-x-auto gap-3 mb-8 pb-4 scrollbar-hide justify-start sm:justify-center px-4">
              {data.map((day) => (
                <button
                  key={day.day}
                  onClick={() => setActiveDay(day.day)}
                  className={`flex-shrink-0 px-5 py-3 rounded-2xl text-sm font-bold transition-all whitespace-nowrap border-4 relative overflow-hidden group ${
                    activeDay === day.day
                      ? "bg-sb-yellow border-white text-sb-brown shadow-cartoon scale-110 z-10"
                      : "bg-white/80 border-white/50 text-gray-400 hover:bg-white hover:text-sb-teal hover:border-white hover:-translate-y-1"
                  }`}
                >
                  <span className="block text-xs uppercase opacity-70">
                    <span>Day</span> <span>{day.day}</span>
                  </span>
                  <span className="text-lg">
                    <span>{day.date.split(" ")[0]}</span>
                  </span>
                </button>
              ))}
            </div>

            <div className="animate-fade-in px-2">
              <div className="mb-8 flex items-center justify-center">
                <div className="bg-white/90 px-8 py-3 rounded-full border-4 border-white shadow-cartoon text-center">
                  <h2 className="text-2xl font-black text-sb-teal inline-block mr-3">
                    <span>{currentDay.date}</span>
                  </h2>
                  <span className="text-sm font-bold text-gray-400 bg-gray-100 px-3 py-1 rounded-full">
                    <span>{currentDay.events.length}</span> <span>ÂÄã‰ªªÂãô</span>
                  </span>
                </div>
              </div>

              <div className="relative">
                {currentDay.events.map((event, idx) => {
                  const isNext =
                    nextEventId &&
                    nextEventId.day === currentDay.day &&
                    nextEventId.idx === idx;
                  return (
                    <EventItem
                      key={idx}
                      event={{ ...event, dateStr: currentDay.dateStr }}
                      isNext={isNext}
                      eventId={`event-${currentDay.day}-${idx}`}
                    />
                  );
                })}
              </div>
            </div>
          </div>
        );
      };

      const LogisticsView = ({ flights, hotels }) => {
        return (
          <div className="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 px-4">
            <div className="bg-white rounded-[40px] shadow-cartoon border-4 border-white overflow-hidden relative">
              <div className="absolute top-0 right-0 p-6 opacity-10 rotate-12">
                <Icons.Plane className="w-24 h-24" />
              </div>
              <div className="bg-sb-blue p-6 border-b-4 border-white flex items-center">
                <div className="bg-white p-3 rounded-full shadow-md mr-4 text-sb-blue">
                  <Icons.Plane className="w-6 h-6" />
                </div>
                <h3 className="font-black text-white text-xl tracking-wider">
                  <span>Ëà™Áè≠Ë≥áË®ä</span>
                </h3>
              </div>
              <div className="p-6 space-y-6">
                {flights.map((flight, idx) => (
                  <div
                    key={idx}
                    className="bg-blue-50/50 p-5 rounded-3xl border-2 border-blue-100 hover:border-sb-blue transition-colors"
                  >
                    <div className="flex justify-between items-center mb-4">
                      <span className="text-xs font-black text-white bg-sb-blue px-3 py-1 rounded-full uppercase">
                        <span>{flight.type}</span>
                      </span>
                      <span className="font-mono font-black text-2xl text-sb-blue">
                        <span>{flight.code}</span>
                      </span>
                    </div>
                    <div className="flex items-center justify-between text-gray-700 my-4">
                      <div className="text-center w-1/3">
                        <div className="text-3xl font-black">
                          <span>{flight.from}</span>
                        </div>
                        <div className="text-xs font-bold text-gray-400 mt-1 bg-white px-2 py-0.5 rounded-full inline-block">
                          <span>Âá∫Áôº</span>
                        </div>
                      </div>
                      <div className="flex-1 flex justify-center text-sb-blue/30">
                        <Icons.ArrowRight className="w-8 h-8" />
                      </div>
                      <div className="text-center w-1/3">
                        <div className="text-3xl font-black">
                          <span>{flight.to}</span>
                        </div>
                        <div className="text-xs font-bold text-gray-400 mt-1 bg-white px-2 py-0.5 rounded-full inline-block">
                          <span>ÊäµÈÅî</span>
                        </div>
                      </div>
                    </div>
                    <div className="flex justify-between text-sm font-bold text-gray-500 pt-4 border-t-2 border-blue-100 border-dashed">
                      <span className="flex items-center">
                        <Icons.Clock className="w-4 h-4 mr-1" />
                        <span className="font-mono">
                          <span>{flight.time}</span>
                        </span>
                      </span>
                      <span className="bg-white px-3 py-1 rounded-full border border-blue-100 text-sb-blue">
                        <span>Â∫ß‰Ωç: </span>
                        <span>{flight.seat}</span>
                      </span>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            <div className="bg-white rounded-[40px] shadow-cartoon border-4 border-white overflow-hidden relative">
              <div className="absolute top-0 right-0 p-6 opacity-10 rotate-12">
                <Icons.Hotel className="w-24 h-24" />
              </div>
              <div className="bg-sb-pink p-6 border-b-4 border-white flex items-center">
                <div className="bg-white p-3 rounded-full shadow-md mr-4 text-sb-pink">
                  <Icons.Hotel className="w-6 h-6" />
                </div>
                <h3 className="font-black text-white text-xl tracking-wider">
                  <span>‰ΩèÂÆøÂÆâÊéí</span>
                </h3>
              </div>
              <div className="p-6 space-y-4">
                {hotels.map((hotel, idx) => (
                  <div
                    key={idx}
                    className="group p-5 rounded-3xl border-2 border-transparent hover:bg-orange-50 hover:border-orange-100 transition-all"
                  >
                    <div className="flex justify-between items-start mb-2">
                      <span className="text-xs font-bold text-white bg-sb-pink px-3 py-1 rounded-full">
                        <span>{hotel.date}</span>
                      </span>
                      <span className="font-mono text-lg font-black text-sb-brown">
                        <span>¬•</span>
                        <span>{hotel.price}</span>
                      </span>
                    </div>
                    <h4 className="font-black text-gray-800 text-lg mb-2 group-hover:text-sb-pink transition-colors">
                      <span>{hotel.name}</span>
                    </h4>
                    <div className="flex flex-col gap-2 text-sm font-bold text-gray-500">
                      <div className="flex items-center">
                        <span className="mr-2 text-gray-300">
                          <Icons.MapPin className="w-4 h-4" />
                        </span>
                        <span>{hotel.area}</span>
                      </div>
                      <div className="flex items-center text-xs text-gray-400 bg-gray-50 p-2 rounded-xl border border-gray-100">
                        <span className="mr-2">
                          <Icons.Info className="w-3 h-3" />
                        </span>
                        <span>{hotel.note}</span>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        );
      };

      const BudgetView = ({ budget }) => {
        const total = budget.reduce((sum, item) => sum + item.twd, 0);

        return (
          <div className="max-w-4xl mx-auto px-4">
            <div className="bg-white rounded-[40px] shadow-cartoon border-4 border-white overflow-hidden">
              <div className="bg-sb-plankton p-6 border-b-4 border-white flex justify-between items-center">
                <h3 className="font-black text-white text-xl tracking-wider flex items-center">
                  <span className="bg-white/20 p-2 rounded-xl mr-3">
                    <Icons.Wallet className="w-6 h-6" />
                  </span>{" "}
                  <span>È†ê‰º∞Ë≤ªÁî®</span>
                </h3>
                <div className="text-white/80 text-sm font-bold bg-black/20 px-4 py-2 rounded-full">
                  <span>ËüπËÄÅÈóÜÊúÉÂæàÈñãÂøÉ ü¶Ä</span>
                </div>
              </div>

              <div className="overflow-x-auto">
                <table className="w-full text-left">
                  <thead>
                    <tr className="text-gray-400 text-xs font-black uppercase tracking-wider border-b-2 border-gray-100">
                      <th className="px-8 py-5">
                        <span>È†ÖÁõÆ</span>
                      </th>
                      <th className="px-8 py-5 text-right">
                        <span>ÈáëÈ°ç (TWD)</span>
                      </th>
                      <th className="px-8 py-5 pl-8">
                        <span>ÂÇôË®ª</span>
                      </th>
                    </tr>
                  </thead>
                  <tbody className="text-sm font-bold text-gray-600 divide-y-2 divide-gray-50/50">
                    {budget.map((item, idx) => (
                      <tr
                        key={idx}
                        className="hover:bg-green-50 transition-colors"
                      >
                        <td className="px-8 py-5 text-gray-800">
                          <span>{item.item}</span>
                        </td>
                        <td className="px-8 py-5 text-right font-mono font-black text-sb-plankton text-base">
                          <span>{item.twd.toLocaleString()}</span>
                        </td>
                        <td className="px-8 py-5 pl-8 text-gray-400 text-xs">
                          <span>{item.note}</span>
                        </td>
                      </tr>
                    ))}
                  </tbody>
                  <tfoot>
                    <tr className="bg-green-50 border-t-4 border-green-100">
                      <td className="px-8 py-6 font-black text-xl text-gray-800">
                        <span>Á∏ΩË®àÈ†ê‰º∞</span>
                      </td>
                      <td className="px-8 py-6 text-right font-mono text-3xl font-black text-sb-plankton">
                        <span>{total.toLocaleString()}</span>
                      </td>
                      <td></td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>
          </div>
        );
      };

      const App = () => {
        const [activeTab, setActiveTab] = useState("itinerary");

        useEffect(() => {}, [activeTab]);

        return (
          <div className="min-h-screen pb-12 relative z-10">
            <div className="sticky top-0 z-50 mb-8 pt-4 px-4">
              <div className="max-w-4xl mx-auto bg-white/90 backdrop-blur-md rounded-full shadow-cartoon border-4 border-white px-6 py-3 flex items-center justify-between">
                <h1 className="text-xl font-black text-sb-blue flex items-center tracking-tight">
                  <span className="bg-sb-yellow text-sb-brown w-10 h-10 rounded-full flex items-center justify-center mr-3 text-lg shadow-sm border-2 border-white">
                    <Icons.Anchor className="w-6 h-6" />
                  </span>
                  <span>{TRIP_DATA.meta.title}</span>
                </h1>
                <div className="hidden sm:flex items-center text-xs font-bold text-gray-500 bg-gray-100 px-4 py-2 rounded-full border-2 border-white shadow-inner">
                  <span className="mr-2">
                    <Icons.Calendar className="w-3 h-3" />
                  </span>
                  <span>{TRIP_DATA.meta.dates}</span>
                </div>
              </div>
            </div>

            <div className="max-w-5xl mx-auto">
              <Tabs activeTab={activeTab} onTabChange={setActiveTab} />
              <div className="animate-fade-in">
                {activeTab === "itinerary" && (
                  <ItineraryView data={TRIP_DATA.itinerary} />
                )}
                {activeTab === "logistics" && (
                  <LogisticsView
                    flights={TRIP_DATA.flights}
                    hotels={TRIP_DATA.hotels}
                  />
                )}
                {activeTab === "budget" && (
                  <BudgetView budget={TRIP_DATA.budget} />
                )}
                {activeTab === "todo" && <TodoView />}
              </div>
            </div>

            <div className="text-center py-12 text-white font-bold opacity-80 text-sm">
              <span>Ê∫ñÂÇôÂ•ΩÂéªÊäìÊ∞¥ÊØç‰∫ÜÂóéÔºü ü™º</span>
            </div>

            <BackgroundEffects />
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<App />);
    </script>
  </body>
</html>
