<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æº–å‚™å¥½äº†å—ï¼Ÿæ²–ç¹©ä¹‹æ—…ï¼ğŸ</title>
    <!-- å¼•å…¥ React èˆ‡ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- å¼•å…¥ Babel ç”¨æ–¼è§£æ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        sb: {
                            yellow: '#F7E35E',
                            darkYellow: '#E6D04A',
                            brown: '#8F5B36',
                            pink: '#FF959D',
                            darkPink: '#E87D85',
                            blue: '#65C0E2',
                            teal: '#20B2AA',
                            purple: '#B19CD9',
                            green: '#A0D6B4',
                            red: '#D63C38',
                            plankton: '#1F7A5E',
                            sand: '#FDFBF7'
                        }
                    },
                    fontFamily: {
                        cartoon: ['"Comic Sans MS"', '"Chalkboard SE"', '"Arial Rounded MT Bold"', 'sans-serif'],
                    },
                    boxShadow: {
                        'cartoon': '4px 4px 0px 0px rgba(0,0,0,0.15)',
                        'cartoon-hover': '2px 2px 0px 0px rgba(0,0,0,0.15)',
                    },
                    animation: {
                        'float-slow': 'float 6s ease-in-out infinite',
                        'float-medium': 'float 4s ease-in-out infinite',
                        'float-fast': 'float 3s ease-in-out infinite',
                        'spin-slow': 'spin 12s linear infinite',
                        'spin-reverse': 'spin 15s linear infinite reverse',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* æ²è»¸æ¨£å¼ */
        ::-webkit-scrollbar {
            width: 10px;
            height: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #65C0E2;
        }

        ::-webkit-scrollbar-thumb {
            background: #F7E35E;
            border-radius: 10px;
            border: 2px solid #65C0E2;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #FF959D;
        }

        body {
            font-family: "Comic Sans MS", "Chalkboard SE", "Arial Rounded MT Bold", sans-serif;
            background-color: #65C0E2;
            color: #5D4037;
            overflow-x: hidden;
        }

        .animate-fade-in {
            animation: fadeIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* èƒŒæ™¯æ’åœ–å®šä½ */
        .bg-illustration {
            position: fixed;
            z-index: -1;
            pointer-events: none;
            opacity: 0.6;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // SVG åœ–æ¨™çµ„ä»¶
        const Icons = {
            Plane: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 12h20" /><path d="M13 2a10.3 10.3 0 0 0 4.39 6.66C20.09 10.46 21 11 21 11H3s1 .54 3.61 2.34A10.3 10.3 0 0 0 11 20" /><path d="m5 17 2 2" /></svg>,
            Hotel: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M2 20v-8h20v8" /><path d="M2 20h20" /><path d="M5 8h14" /><path d="M2 4v16" /><path d="M22 4v16" /><path d="M8 8v4" /><path d="M16 8v4" /></svg>,
            Car: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2" /><circle cx="7" cy="17" r="2" /><path d="M9 17h6" /><circle cx="17" cy="17" r="2" /></svg>,
            MapPin: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z" /><circle cx="12" cy="10" r="3" /></svg>,
            Clock: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10" /><polyline points="12 6 12 12 16 14" /></svg>,
            Wallet: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M21 12V7H5a2 2 0 0 1 0-4h14v4" /><path d="M3 5v14a2 2 0 0 0 2 2h16v-5" /><path d="M18 12a2 2 0 0 0 0 4h4v-4Z" /></svg>,
            Calendar: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><rect width="18" height="18" x="3" y="4" rx="2" ry="2" /><line x1="16" x2="16" y1="2" y2="6" /><line x1="8" x2="8" y1="2" y2="6" /><line x1="3" x2="21" y1="10" y2="10" /></svg>,
            Utensils: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2" /><path d="M7 2v20" /><path d="M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7" /></svg>,
            Info: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10" /><path d="M12 16v-4" /><path d="M12 8h.01" /></svg>,
            ArrowRight: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14" /><path d="m12 5 7 7-7 7" /></svg>,
            X: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 6 6 18" /><path d="m6 6 12 12" /></svg>,
            Map: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21" /><line x1="9" x2="9" y1="3" y2="18" /><line x1="15" x2="15" y1="6" y2="21" /></svg>,
            ExternalLink: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" /><polyline points="15 3 21 3 21 9" /><line x1="10" x2="21" y1="14" y2="3" /></svg>,
            Timer: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><line x1="10" x2="14" y1="2" y2="2" /><line x1="12" x2="15" y1="14" y2="11" /><circle cx="12" cy="14" r="8" /></svg>,
            Anchor: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="5" r="3" /><line x1="12" x2="12" y1="22" y2="8" /><path d="M5 12H2a10 10 0 0 0 20 0h-3" /></svg>,
            CheckSquare: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polyline points="9 11 12 14 22 4" /><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11" /></svg>,
            Plus: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M5 12h14" /><path d="M12 5v14" /></svg>,
            Trash: ({ className }) => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 6h18" /><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" /><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" /></svg>,
        };

        // æµ·ç¶¿å¯¶å¯¶é¢¨æ ¼æ’åœ– SVG çµ„ä»¶
        const Illustrations = {
            // ç¶“å…¸å¤©ç©ºèŠ±æœµ
            SkyFlower: ({ color, className }) => (
                <svg viewBox="0 0 200 200" className={className}>
                    <g fill={color}>
                        <ellipse cx="100" cy="40" rx="30" ry="50" transform="rotate(0 100 100)" />
                        <ellipse cx="100" cy="40" rx="30" ry="50" transform="rotate(72 100 100)" />
                        <ellipse cx="100" cy="40" rx="30" ry="50" transform="rotate(144 100 100)" />
                        <ellipse cx="100" cy="40" rx="30" ry="50" transform="rotate(216 100 100)" />
                        <ellipse cx="100" cy="40" rx="30" ry="50" transform="rotate(288 100 100)" />
                    </g>
                    <circle cx="100" cy="100" r="25" fill="#FFF" opacity="0.8" />
                    <circle cx="100" cy="100" r="15" fill={color} opacity="0.5" />
                </svg>
            ),
            // æ°´æ¯
            Jellyfish: ({ className }) => (
                <svg viewBox="0 0 100 120" className={className}>
                    <path d="M10,40 Q50,-20 90,40" fill="#FF959D" stroke="#E87D85" strokeWidth="3" />
                    <path d="M10,40 L90,40" fill="#FF959D" />
                    <path d="M20,40 Q20,80 10,100" stroke="#FF959D" strokeWidth="4" fill="none" />
                    <path d="M40,40 Q50,80 40,110" stroke="#FF959D" strokeWidth="4" fill="none" />
                    <path d="M60,40 Q50,80 60,110" stroke="#FF959D" strokeWidth="4" fill="none" />
                    <path d="M80,40 Q80,80 90,100" stroke="#FF959D" strokeWidth="4" fill="none" />
                    <circle cx="30" cy="25" r="3" fill="#E87D85" />
                    <circle cx="60" cy="15" r="4" fill="#E87D85" />
                    <circle cx="75" cy="30" r="2" fill="#E87D85" />
                </svg>
            ),
            // é³³æ¢¨
            Pineapple: ({ className }) => (
                <svg viewBox="0 0 100 140" className={className}>
                    {/* Leaves */}
                    <path d="M50,40 Q30,10 50,0 Q70,10 50,40" fill="#4CAF50" />
                    <path d="M50,40 Q20,20 30,5 Q40,20 50,40" fill="#66BB6A" />
                    <path d="M50,40 Q80,20 70,5 Q60,20 50,40" fill="#66BB6A" />
                    {/* Body */}
                    <ellipse cx="50" cy="85" rx="35" ry="45" fill="#F7E35E" stroke="#E6D04A" strokeWidth="2" />
                    {/* Texture */}
                    <line x1="30" y1="60" x2="70" y2="110" stroke="#E6D04A" strokeWidth="1" />
                    <line x1="70" y1="60" x2="30" y2="110" stroke="#E6D04A" strokeWidth="1" />
                    <line x1="25" y1="80" x2="75" y2="80" stroke="#E6D04A" strokeWidth="1" />
                    <line x1="25" y1="95" x2="75" y2="95" stroke="#E6D04A" strokeWidth="1" />
                </svg>
            )
        };

        // èƒŒæ™¯æ’åœ–é›†åˆ
        const BackgroundEffects = () => (
            <>
                <Illustrations.SkyFlower className="bg-illustration w-32 h-32 top-10 left-5 animate-spin-slow text-sb-teal" color="#20B2AA" />
                <Illustrations.SkyFlower className="bg-illustration w-48 h-48 bottom-20 right-10 animate-spin-reverse text-sb-purple" color="#B19CD9" />
                <Illustrations.SkyFlower className="bg-illustration w-24 h-24 top-1/3 right-1/4 animate-spin-slow text-sb-green" color="#A0D6B4" />
                <Illustrations.SkyFlower className="bg-illustration w-16 h-16 bottom-1/3 left-10 animate-spin-slow text-sb-pink" color="#FF959D" />

                <Illustrations.Jellyfish className="bg-illustration w-20 h-24 top-20 right-20 animate-float-slow opacity-80" />
                <Illustrations.Jellyfish className="bg-illustration w-16 h-20 bottom-40 left-1/3 animate-float-medium opacity-70" />
                <Illustrations.Jellyfish className="bg-illustration w-12 h-16 top-1/2 left-10 animate-float-fast opacity-60" />

                <Illustrations.Pineapple className="bg-illustration w-24 h-32 top-32 left-1/4 opacity-40 rotate-12" />
            </>
        );

        // æ¨¡æ“¬æ•¸æ“š
        const TRIP_DATA = {
            meta: {
                title: "æ²–ç¹©äº”å¤©å››å¤œè·¨å¹´ä¹‹æ—…",
                dates: "2025/12/30 (äºŒ) - 2026/01/03 (å…­)",
                travelers: 2,
                rate: 0.21
            },
            flights: [
                { type: "å»ç¨‹", code: "IT230", date: "12/30", time: "06:35 - 08:55", seat: "5AB", from: "TPE", to: "OKA" },
                { type: "å›ç¨‹", code: "IT233", date: "01/03", time: "21:30 - 22:05", seat: "28AB", from: "OKA", to: "TPE" }
            ],
            hotels: [
                { date: "12/30 (äºŒ)", name: "HOTEL NAHA CITY", area: "é‚£éœ¸", price: 6881, currency: "JPY", note: "åœè»Š Â¥1000/æ—¥" },
                { date: "12/31 (ä¸‰)", name: "HOTEL YUQUESTA AGARIMACHI", area: "é‚£éœ¸", price: 8100, currency: "JPY", note: "å«æ—©é¤" },
                { date: "01/01 (å››)", name: "è¶…ç´šé£¯åº— (Super Hotel)", area: "åè­·", price: 5440, currency: "JPY", note: "ææ—©åˆ°é¸æ•é ­ (é ä¼°åƒ¹æ ¼)" },
                { date: "01/02 (äº”)", name: "é‚£éœ¸å€«å‹ƒæœ—é¢¨æ ¼é£¯åº—", area: "é‚£éœ¸", price: 4710, currency: "JPY", note: "Rembrandt Style Naha" }
            ],
            itinerary: [
                {
                    day: 1,
                    date: "12/30 (äºŒ)",
                    dateStr: "2025-12-30",
                    events: [
                        { time: "06:35", endTime: "08:55", title: "æŠµé”é‚£éœ¸æ©Ÿå ´", type: "transport", location: "é‚£éœ¸æ©Ÿå ´", cost: 0, note: "èˆªç­ IT230" },
                        {
                            time: "09:30",
                            endTime: "10:00",
                            title: "ç§Ÿè»Šå–è»Š",
                            type: "transport",
                            location: "Brother Rent-A-Car (ãƒ–ãƒ©ã‚¶ãƒ¼ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼)",
                            mapLocation: "æ²–ç¸„çœŒé‚£è¦‡å¸‚ç”°åŸ3-1-8",
                            cost: 25470,
                            note: "é è¨ˆ1å°æ™‚ï¼Œå«ä¿éšªã€‚è²»ç”¨ï¼šÂ¥25,470 (ç¾å ´ä»˜)",
                            mapLink: "https://maps.app.goo.gl/zqpsHZkhGTZXQbEd7"
                        },
                        { time: "10:30", endTime: "11:30", title: "æ—©åˆé¤ï¼šå®¢ç¾å¤šå’–å•¡", type: "meal", location: "å®¢ç¾å¤šå’–å•¡ æ²–ç¹©ç³¸æ»¿åº—", cost: 1000, note: "åœç•™ç´„1å°æ™‚" },
                        { time: "12:00", endTime: "15:30", title: "æ²–ç¹©ä¸–ç•Œ - ç‰æ³‰æ´", type: "activity", location: "æ²–ç¹©ä¸–ç•Œ æ–‡åŒ–ç‹åœ‹ãƒ»ç‰æ³‰æ´", cost: 4000, note: "13:30 æ¯’è›‡ç§€ï¼ŒKlookè²·ä¸€é€ä¸€ï¼Œè²»ç”¨Â¥4,000" },
                        { time: "15:40", endTime: "16:30", title: "å¥§æ­¦å³¶è§€å…‰", type: "activity", location: "å¥§æ­¦å³¶", cost: 500, note: "åœç•™ç´„1å°æ™‚ï¼Œåƒç‚¸ç‰©" },
                        {
                            time: "17:00",
                            endTime: "18:00",
                            title: "Ricoland Okinawa",
                            type: "activity",
                            location: "Ricoland Okinawa",
                            mapLocation: "Ricoland Okinawa",
                            cost: 0,
                            note: "æ©Ÿè»Šç”¨å“åº—ï¼Œåœç•™1å°æ™‚"
                        },
                        {
                            time: "18:00",
                            endTime: "19:00",
                            title: "é£¯åº— Check-in",
                            type: "transport",
                            location: "HOTEL NAHA CITY",
                            mapLocation: "1 Chome-4-5 Matsuo, Naha, Okinawa 900-0014æ—¥æœ¬",
                            cost: 6881,
                            note: "åœè»Šè²»ç”¨ Â¥1000/æ—¥ã€‚å‚™è¨»ï¼š10Få¸è¸å€"
                        },
                        {
                            time: "18:40",
                            endTime: "20:30",
                            title: "æ™šé¤ï¼šBuchi Kumojiten (çƒ¤è‚‰)",
                            type: "meal",
                            location: "Yakiniku Buchi Kumoji (ç‡’è‚‰ Buchi ä¹…èŒ‚åœ°åº—)",
                            mapLocation: "Yakiniku Buchi Kumoji",
                            cost: 5000,
                            note: "ã€å·²é è¨‚ã€‘18:40ã€‚å¿…é»ï¼šç”Ÿç‰›è‚‰èµ¤èº«ã€åœŸé‹é£¯ã€‚(æé†’ï¼šè¨‚äº†å…©å®¶ï¼Œéœ€é¸ä¸€å®¶)"
                        }
                    ]
                },
                {
                    day: 2,
                    date: "12/31 (ä¸‰)",
                    dateStr: "2025-12-31",
                    events: [
                        {
                            time: "07:00",
                            endTime: "07:30",
                            title: "æ—©é¤ï¼šç¦åŠ©ç‰å­ç‡’ æˆ– è±¬è‚‰è›‹é£¯ç³°",
                            type: "meal",
                            location: "ç‰§å¿—å¸‚å ´å‘¨é‚Š",
                            cost: 1000,
                            note: "èµ°è·¯10åˆ†é˜ã€‚ç¦åŠ©7:30é–‹ / é£¯ç³°7:00é–‹"
                        },
                        {
                            time: "09:00",
                            endTime: "13:00",
                            title: "Parco City é€›è¡—",
                            type: "activity",
                            location: "æµ¦æ·»è¥¿æµ·å²¸ PARCO CITY",
                            cost: 5000,
                            note: "åœè»Šå…è²»ã€‚é–‹è»Šç´„20åˆ†é˜"
                        },
                        {
                            time: "13:30",
                            endTime: "14:30",
                            title: "åˆé¤ï¼šæ•˜æ•˜è‹‘ç‡’è‚‰",
                            type: "meal",
                            location: "æ•˜æ•˜è‹‘ æ²–ç¹©æµ¦æ·»PARCO CITYåº—",
                            cost: 3000,
                            note: "ã€å·²é è¨‚ã€‘é ç´„ 13:30"
                        },
                        {
                            time: "15:00",
                            endTime: "16:00",
                            title: "æ¼«ç•«å€‰åº« / æ¸¯å·å¤–äººä½å®…",
                            type: "activity",
                            location: "æ¸¯å·å¤–äººä½å®…è¡—",
                            cost: 1500,
                            note: "æµ¦æ·»å€ã€‚é–‹è»Šç´„9åˆ†é˜"
                        },
                        {
                            time: "18:30",
                            endTime: "19:00",
                            title: "é£¯åº— Check-in",
                            type: "transport",
                            location: "HOTEL YUQUESTA AGARIMACHI",
                            mapLocation: "7-22 Higashimachi, Naha, Okinawa 900-0034æ—¥æœ¬",
                            cost: 0,
                            note: "éœ€æ‰¾åœè»Šå ´ï¼Œç›¡é‡æ—©å›"
                        },
                        {
                            time: "20:00",
                            endTime: "21:30",
                            title: "æ™šé¤ï¼šLITOR",
                            type: "meal",
                            location: "LITOR",
                            cost: 2000,
                            note: "ã€å·²é è¨‚ã€‘é ç´„ 20:00ã€‚ä¸èƒ½é²åˆ°ï¼(é²åˆ°ç•¶å¤©é€€è²»ä¹Ÿæ‰£éŒ¢)"
                        },
                        {
                            time: "22:00",
                            endTime: "00:30",
                            title: "è·¨å¹´æ´»å‹•ï¼šChurasun 6",
                            type: "activity",
                            location: "Churasun 6",
                            mapLocation: "Churasun 6, Naha",
                            cost: 9000,
                            note: "ã€å·²é è¨‚ã€‘é ç´„ 22:00 (22:30 é–‹å§‹)ã€‚è²»ç”¨Â¥9,000"
                        }
                    ]
                },
                {
                    day: 3,
                    date: "01/01 (å››)",
                    dateStr: "2026-01-01",
                    events: [
                        { time: "08:00", endTime: "08:30", title: "æ—©é¤ï¼šA&W æ¼¢å ¡", type: "meal", location: "A&W ç‰§æ¸¯åº—", cost: 1500, note: "å…ƒæ—¦æ—©é¤" },
                        { time: "09:00", endTime: "09:30", title: "è¬åº§æ¯›", type: "activity", location: "è¬åº§æ¯›", cost: 200, note: "å¯ä»¥ä¸å»ï¼Œå¯èƒ½æœƒå¾ˆè¶•ï¼Œä¸ç„¶è¦æ›´æ—©å‡ºé–€ã€‚è²»ç”¨Â¥200" },
                        {
                            time: "12:00",
                            endTime: "12:30",
                            title: "åˆé¤ï¼šè¨±ç”°ä¼‘æ¯ç«™ æˆ– CAMEL SANDWICH",
                            type: "meal",
                            location: "è¨±ç”°ä¼‘æ¯ç«™ / CAMEL SANDWICH",
                            mapLocation: "CAMEL SANDWICH",
                            cost: 1500,
                            note: "éš¨æ„åƒæˆ–åƒä¸‰æ˜æ²»"
                        },
                        {
                            time: "14:00",
                            endTime: "17:00",
                            title: "ç¾éº—æµ·æ°´æ—é¤¨",
                            type: "activity",
                            location: "æ²–ç¹©ç¾éº—æµ·æ°´æ—é¤¨",
                            cost: 4360,
                            note: "ã€æ”»ç•¥ã€‘P7åŒ—åœè»Šå ´æœ€è¿‘ã€‚13:20æ’éšŠé¤µæµ·è±šã€14:00é¤µæµ·é¾œã€15:00é¯¨é¯Šé¤µé£Ÿ(é»‘æ½®ä¹‹æµ·)ã€‚è²»ç”¨Â¥4,360"
                        },
                        {
                            time: "18:00",
                            endTime: "18:30",
                            title: "é£¯åº— Check-in",
                            type: "transport",
                            location: "Super Hotel Nago",
                            mapLocation: "Super Hotel Okinawa Nago",
                            cost: 5440,
                            note: "ææ—©åˆ°é¸æ•é ­ã€‚è¶…ç´šé£¯åº—(åè­·)"
                        },
                        {
                            time: "19:00",
                            endTime: "21:00",
                            title: "æ™šé¤ï¼šç™¾å¹´å¤å®¶ å¤§å®¶ (é˜¿å¤è±¬)",
                            type: "meal",
                            location: "Ufuya (ç™¾å¹´å¤å®¶ å¤§å®¶)",
                            mapLocation: "Ufuya, Nago",
                            cost: 4880,
                            note: "ã€å·²é è¨‚ã€‘é ç´„ 19:30"
                        }
                    ]
                },
                {
                    day: 4,
                    date: "01/02 (äº”)",
                    dateStr: "2026-01-02",
                    events: [
                        { time: "07:00", endTime: "09:30", title: "æ—©é¤ï¼šé£¯åº—æ—©é¤", type: "meal", location: "Super Hotel Nago", cost: 0, note: "" },
                        {
                            time: "09:00",
                            endTime: "10:00",
                            title: "å¤å®‡åˆ©æµ·æ´‹å¡”",
                            type: "activity",
                            location: "å¤å®‡åˆ©æµ·æ´‹å¡”",
                            cost: 2000,
                            note: "æ¬£è³é¢¨æ™¯ã€‚è²»ç”¨Â¥2,000"
                        },
                        {
                            time: "11:30",
                            endTime: "12:00",
                            title: "åˆé¤ï¼šå¤å®‡åˆ©è¦è¦é£¯",
                            type: "meal",
                            location: "Kouri Shrimp",
                            mapLocation: "Kouri Shrimp Wagon",
                            cost: 2160,
                            note: "é™„è¿‘é‚„æœ‰ NoBi"
                        },
                        {
                            time: "13:30",
                            endTime: "14:30",
                            title: "ç¾åœ‹æ‘",
                            type: "activity",
                            location: "ç¾åœ‹æ‘",
                            mapLocation: "American Village Okinawa",
                            cost: 1500,
                            note: "é€›è¡—æ‹ç…§"
                        },
                        {
                            time: "15:00",
                            endTime: "16:00",
                            title: "æ°¸æ—ºå¤¢æ¨‚åŸ (Aeon Mall)",
                            type: "activity",
                            location: "AEON MALL Okinawa Rycom",
                            cost: 5000,
                            note: "å¤§å‹è³¼ç‰©ä¸­å¿ƒ"
                        },
                        {
                            time: "19:00",
                            endTime: "20:00",
                            title: "æ™šé¤ï¼šå‚‘å…‹ç‰›æ’",
                            type: "meal",
                            location: "Jack's Steak House (å‚‘å…‹ç‰›æ’ é‚£éœ¸åº—)",
                            mapLocation: "Jack's Steak House Naha Okinawa",
                            cost: 3000,
                            note: "å¯ä»¥19:00å…ˆå»åƒï¼Œå† Check-in èµ°å›å»"
                        },
                        {
                            time: "19:30",
                            endTime: "21:00",
                            title: "é£¯åº— Check-in",
                            type: "transport",
                            location: "Rembrandt Style Naha",
                            mapLocation: "Rembrandt Style Naha",
                            cost: 4710,
                            note: "é‚£éœ¸å€«å‹ƒæœ—é¢¨æ ¼é£¯åº—"
                        }
                    ]
                },
                {
                    day: 5,
                    date: "01/03 (å…­)",
                    dateStr: "2026-01-03",
                    events: [
                        { time: "07:00", endTime: "09:30", title: "æ—©é¤ï¼šé£¯åº—æ—©é¤", type: "meal", location: "Rembrandt Style Naha", cost: 0, note: "" },
                        { time: "09:30", endTime: "10:00", title: "æ³¢ä¸Šå®®", type: "activity", location: "æ³¢ä¸Šå®®", cost: 0, note: "åƒæ‹œæ‹ç…§" },
                        {
                            time: "10:00",
                            endTime: "11:00",
                            title: "æ—©åˆé¤ï¼šå¹¸ç¦é¬†é¤…",
                            type: "meal",
                            location: "A Happy Pancake Umikaji Terrace",
                            cost: 2000,
                            note: "è·¯é‚Šåœè»Šå…è²»ï¼Œéœ€æ’éšŠ"
                        },
                        {
                            time: "12:00",
                            endTime: "13:00",
                            title: "è³¼ç‰©ï¼šiias æ²–ç¹©è±å´",
                            type: "activity",
                            location: "iias Okinawa Toyosaki",
                            cost: 5000,
                            note: "æœ€å¾Œæ¡è²·"
                        },
                        {
                            time: "16:30",
                            endTime: "17:00",
                            title: "è³¼ç‰©ï¼šWorkman",
                            type: "activity",
                            location: "Workman Plus",
                            cost: 5000,
                            note: "æ©Ÿèƒ½æœé£¾"
                        },
                        { time: "17:00", endTime: "18:00", title: "é‚„è»Š/å‰å¾€æ©Ÿå ´", type: "transport", location: "é‚£éœ¸æ©Ÿå ´", cost: 0, note: "éœ€é ç•™é‚„è»Šæ™‚é–“" },
                        { time: "21:30", endTime: "22:05", title: "è¿”ç¨‹èˆªç­", type: "transport", location: "IT233", cost: 0, note: "21:30 èµ·é£›" }
                    ]
                }
            ],
            budget: [
                { item: "æ©Ÿç¥¨", twd: 17902, note: "è²· / éƒ½ä»˜äº†" },
                { item: "12/30 åœ‹éš›é€šä½å®¿", twd: 1380, note: "è²· / Â¥6,881 (è³€)" },
                { item: "12/31 åœ‹éš›é€šä½å®¿", twd: 1620, note: "è²· / Â¥8,100 (è³€)" },
                { item: "1/1 åè­·ä½å®¿", twd: 2176, note: "è²· / Â¥10,552 (è³€)" },
                { item: "1/2 åœ‹éš›é€šä½å®¿", twd: 1884, note: "è²· / Â¥9,396 (è³€)" },
                { item: "ç§Ÿè»Š 5å¤©å››å¤œ", twd: 5094, note: "é è¨‚ / Â¥25,470 (ç¾å ´ä»˜)" },
                { item: "æ—¥æœ¬è­¯æ–‡é§•é§›", twd: 256, note: "è²· / éƒ½ä»˜äº†" },
                { item: "é–€ç¥¨ ç¾éº—æµ·æ´‹é¤¨", twd: 874, note: "æœªè²· / Â¥4,360 (è³€)" },
                { item: "é–€ç¥¨ ç‰æ³‰æ´", twd: 375, note: "è²· / Â¥4,000 (Klookè²·ä¸€é€ä¸€)" },
                { item: "é–€ç¥¨ å¤å®‡åˆ©å³¶", twd: 375, note: "è²· / Â¥2,000 (è³€)" },
                { item: "é–€ç¥¨ è¬åº§æ¯›", twd: 40, note: "æœªè²· / Â¥200 (ç¾å ´ä»˜)" },
                { item: "é–€ç¥¨ Churasun 6", twd: 1800, note: "é è¨‚ / Â¥9,000 (ç¾å ´ä»˜)" },
                { item: "æ—…éŠéšª", twd: 1390, note: "è²· / 12/22ä»˜éŒ¢" },
                { item: "esim", twd: 320, note: "æœªè²· / ä¸€äºº300å·¦å³" },
                { item: "åŠ æ²¹éŒ¢(å«åœè»Šè²»)", twd: 2000, note: "é ä¼° / Â¥10,000" },
                { item: "æ©Ÿå ´ä¾†å›è»Šè³‡", twd: 930, note: "é ä¼° / å–®ç¨‹é«˜éµè¨‚ç¥¨äº†430" },
                { item: "é£²é£Ÿ", twd: 8500, note: "é ä¼°" },
                { item: "ç–«è‹—", twd: 2000, note: "è²·" }
            ]
        };

        // å€’æ•¸è¨ˆæ™‚å™¨
        const CountdownTimer = ({ targetDateStr, targetTimeStr }) => {
            const [timeLeft, setTimeLeft] = useState("");

            useEffect(() => {
                const calculateTimeLeft = () => {
                    const target = new Date(`${targetDateStr}T${targetTimeStr}:00`);
                    const now = new Date();
                    const diff = target - now;

                    // åˆ¤æ–·æ˜¯å¦ç‚ºã€Œé€²è¡Œä¸­ã€
                    if (diff <= 0) {
                        return "é€²è¡Œä¸­ ğŸ”¥"; // é¡¯ç¤ºé€²è¡Œä¸­
                    }

                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                    const minutes = Math.floor((diff / 1000 / 60) % 60);
                    const seconds = Math.floor((diff / 1000) % 60);

                    if (days > 0) return `${days}å¤© ${hours}æ™‚ ${minutes}åˆ†`;
                    return `${hours}æ™‚ ${minutes}åˆ† ${seconds}ç§’`;
                };

                setTimeLeft(calculateTimeLeft());
                const timer = setInterval(() => setTimeLeft(calculateTimeLeft()), 1000);
                return () => clearInterval(timer);
            }, [targetDateStr, targetTimeStr]);

            return (
                <div className="flex items-center space-x-2 bg-sb-pink text-white px-3 py-1.5 rounded-full shadow-cartoon border-2 border-white text-sm font-bold animate-pulse">
                    <Icons.Timer className="w-5 h-5" />
                    <span>å€’æ•¸ï¼š<span>{timeLeft}</span></span>
                </div>
            );
        };

        // äº‹ä»¶é …ç›®
        const EventItem = ({ event, isNext, eventId }) => {
            const [isMapVisible, setIsMapVisible] = useState(false);

            const queryLocation = event.mapLocation || event.location;
            const mapQuery = encodeURIComponent(queryLocation);
            const mapUrl = `https://maps.google.com/maps?q=${mapQuery}&t=&z=15&ie=UTF8&iwloc=&output=embed`;
            const externalMapUrl = event.mapLink || `https://www.google.com/maps/search/?api=1&query=${mapQuery}`;

            const getTypeStyle = (type) => {
                switch (type) {
                    case 'meal': return 'bg-sb-yellow border-sb-brown text-sb-brown';
                    case 'transport': return 'bg-gray-100 border-gray-400 text-gray-600';
                    default: return 'bg-sb-teal border-white text-white';
                }
            };

            const getTypeLabel = (type) => {
                switch (type) {
                    case 'meal': return 'ç¾å‘³èŸ¹å ¡';
                    case 'transport': return 'ç§»å‹•ä¸­';
                    default: return 'å»ç©è€';
                }
            };

            return (
                <div id={eventId} className={`relative pl-8 group ${isNext ? 'z-10' : ''}`}>
                    <div className="absolute left-3 top-0 bottom-0 w-1 bg-white/50 border-x border-white/20 group-last:bottom-auto group-last:h-8"></div>

                    <div className={`absolute left-0 top-6 w-7 h-7 rounded-full border-2 border-white shadow-cartoon flex items-center justify-center z-10 transition-transform ${isNext ? 'bg-sb-pink scale-125' : 'bg-sb-yellow'
                        }`}>
                        {event.type === 'meal' ? <Icons.Utensils className="w-3 h-3 text-sb-brown" /> :
                            event.type === 'transport' ? <Icons.Car className="w-3 h-3 text-sb-brown" /> :
                                <Icons.MapPin className="w-3 h-3 text-sb-brown" />}
                    </div>

                    <div className={`mb-6 p-5 rounded-3xl border-4 transition-all duration-300 relative ${isNext
                            ? 'bg-sb-yellow border-sb-brown shadow-cartoon transform scale-[1.02]'
                            : 'bg-white border-white hover:border-sb-yellow hover:shadow-cartoon-hover'
                        }`}>
                        {/* ç©©å®šçµæ§‹ï¼šå€’æ•¸è¨ˆæ™‚å™¨å®¹å™¨æ°¸é å­˜åœ¨ï¼Œåªæ˜¯é€é class æ§åˆ¶é¡¯ç¤º */}
                        <div className={`absolute -top-2 -right-2 w-4 h-4 bg-sb-blue rounded-full border border-white opacity-50 ${isNext ? 'block' : 'hidden'}`}></div>

                        <div className="flex flex-col sm:flex-row sm:items-start justify-between gap-4 relative z-10">
                            <div className="flex-1">
                                <div className="flex items-center justify-between sm:justify-start gap-3 mb-2">
                                    <span className={`font-mono text-sm font-black px-3 py-1 rounded-full border-2 ${isNext ? 'bg-white text-sb-brown border-sb-brown' : 'bg-sb-blue/20 text-sb-brown border-transparent'}`}>
                                        <span>{event.time}</span>
                                    </span>
                                    {/* ç©©å®šçµæ§‹ï¼šå€’æ•¸è¨ˆæ™‚å™¨å®¹å™¨æ°¸é å­˜åœ¨ï¼Œåªæ˜¯é€é class æ§åˆ¶é¡¯ç¤º */}
                                    <div className={isNext ? 'block' : 'hidden'}>
                                        <CountdownTimer targetDateStr={event.dateStr} targetTimeStr={event.time} />
                                    </div>
                                </div>

                                <h4 className={`text-xl font-black mb-2 ${isNext ? 'text-sb-brown' : 'text-gray-700'}`}>
                                    <span>{event.title}</span>
                                </h4>

                                <div className="flex flex-wrap gap-2 text-sm font-bold mb-3">
                                    <span className={`inline-flex items-center px-3 py-1 rounded-full border-2 text-xs ${getTypeStyle(event.type)}`}>
                                        <span>{getTypeLabel(event.type)}</span>
                                    </span>
                                    <div className="flex items-center px-3 py-1 rounded-full bg-white/50 border-2 border-white/50 text-gray-500">
                                        <span className="mr-1.5"><Icons.MapPin className="w-5 h-5" /></span>
                                        <span>{event.location}</span>
                                    </div>
                                </div>

                                {event.note && (
                                    <div className={`flex items-start text-sm p-3 rounded-2xl border-2 ${isNext ? 'bg-white/50 border-sb-brown/20 text-sb-brown' : 'bg-sb-sand border-gray-100 text-gray-500'}`}>
                                        <span className="mr-2 mt-0.5 text-sb-pink"><Icons.Info className="w-4 h-4" /></span>
                                        <span className="font-medium"><span>{event.note}</span></span>
                                    </div>
                                )}
                            </div>

                            <div className="flex flex-row sm:flex-col items-center sm:items-end justify-between sm:justify-start gap-3 min-w-[100px]">
                                {event.cost > 0 && (
                                    <div className="text-right bg-white/80 px-3 py-1 rounded-xl border-2 border-white shadow-sm">
                                        <span className="text-[10px] text-gray-400 uppercase font-black tracking-wider"><span>é ä¼°</span></span>
                                        <div className="font-mono text-lg font-black text-sb-plankton">
                                            <span>Â¥</span><span>{event.cost.toLocaleString()}</span>
                                        </div>
                                    </div>
                                )}
                                <button
                                    onClick={() => setIsMapVisible(!isMapVisible)}
                                    className={`text-sm font-bold flex items-center px-4 py-2 rounded-full border-2 shadow-cartoon-hover transition-all active:translate-y-1 active:shadow-none ${isMapVisible
                                            ? "bg-sb-red text-white border-sb-red"
                                            : "bg-sb-blue text-white border-white hover:bg-teal-400"
                                        }`}
                                >
                                    <span className="mr-1.5"><Icons.Map className="w-4 h-4" /></span>
                                    <span>{isMapVisible ? "æ”¶èµ·" : "åœ°åœ–"}</span>
                                </button>
                            </div>
                        </div>

                        {/* ä½¿ç”¨ç©©å®šçµæ§‹æ¸²æŸ“åœ°åœ–å€å¡Š */}
                        <div className={`mt-4 rounded-2xl overflow-hidden border-4 border-white shadow-cartoon bg-sb-sand animate-fade-in relative ${isMapVisible ? 'block' : 'hidden'}`}>
                            {isMapVisible && (
                                <iframe
                                    width="100%"
                                    height="280"
                                    frameBorder="0"
                                    scrolling="no"
                                    marginHeight="0"
                                    marginWidth="0"
                                    src={mapUrl}
                                    title={`Map of ${event.location}`}
                                    className="w-full block"
                                ></iframe>
                            )}
                            <div className="bg-white py-2 px-3 text-xs flex justify-end border-t-2 border-gray-100 font-bold">
                                <a
                                    href={externalMapUrl}
                                    target="_blank"
                                    rel="noopener noreferrer"
                                    className="flex items-center text-sb-blue hover:text-sb-teal transition-colors"
                                >
                                    <span>é–‹å•Ÿ Google Maps</span> <span className="ml-1"><Icons.ExternalLink className="w-4 h-4" /></span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Todo List çµ„ä»¶
        const TodoView = () => {
            const [todos, setTodos] = useState(() => {
                const saved = localStorage.getItem('okinawa_todos');
                return saved ? JSON.parse(saved) : [
                    { id: 1, text: "ç¢ºèªè­·ç…§æ•ˆæœŸ (è‡³å°‘6å€‹æœˆ)", done: false },
                    { id: 2, text: "ç”³è«‹æ—¥æœ¬é§•ç…§è­¯æœ¬", done: false },
                    { id: 3, text: "è³¼è²·æ—…å¹³éšª/ä¸ä¾¿éšª", done: false },
                    { id: 4, text: "é ç´„ç¶²å¡/æ¼«éŠ", done: false },
                    { id: 5, text: "å¡«å¯« Visit Japan Web", done: false },
                ];
            });
            const [input, setInput] = useState("");

            useEffect(() => {
                localStorage.setItem('okinawa_todos', JSON.stringify(todos));
            }, [todos]);

            const addTodo = () => {
                if (!input.trim()) return;
                setTodos([...todos, { id: Date.now(), text: input, done: false }]);
                setInput("");
            };

            const toggleTodo = (id) => {
                setTodos(todos.map(todo =>
                    todo.id === id ? { ...todo, done: !todo.done } : todo
                ));
            };

            const deleteTodo = (id) => {
                setTodos(todos.filter(todo => todo.id !== id));
            };

            return (
                <div className="max-w-2xl mx-auto px-4">
                    <div className="bg-white rounded-[40px] shadow-cartoon border-4 border-white overflow-hidden">
                        <div className="bg-sb-teal p-6 border-b-4 border-white flex justify-between items-center">
                            <h3 className="font-black text-white text-xl tracking-wider flex items-center">
                                <span className="bg-white/20 p-2 rounded-xl mr-3"><Icons.CheckSquare className="w-6 h-6" /></span> <span>è¡Œå‰æº–å‚™æ¸…å–®</span>
                            </h3>
                            <div className="text-white/80 text-sm font-bold bg-black/20 px-4 py-2 rounded-full">
                                <span>{todos.filter(t => t.done).length}</span> / <span>{todos.length}</span> <span>å®Œæˆ</span>
                            </div>
                        </div>

                        <div className="p-6">
                            <div className="flex gap-2 mb-6">
                                <input
                                    type="text"
                                    value={input}
                                    onChange={(e) => setInput(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && addTodo()}
                                    placeholder="æ–°å¢å¾…è¾¦äº‹é …..."
                                    className="flex-1 bg-gray-50 border-2 border-gray-200 rounded-xl px-4 py-3 font-bold text-gray-700 focus:outline-none focus:border-sb-teal focus:ring-2 focus:ring-sb-teal/20"
                                />
                                <button
                                    onClick={addTodo}
                                    className="bg-sb-teal text-white px-4 rounded-xl font-bold border-2 border-white shadow-sm hover:bg-teal-500 transition-colors"
                                >
                                    <Icons.Plus className="w-5 h-5" />
                                </button>
                            </div>

                            <div className="space-y-3">
                                {todos.map(todo => (
                                    <div key={todo.id} className={`flex items-center justify-between p-4 rounded-2xl border-2 transition-all ${todo.done ? 'bg-gray-50 border-gray-100' : 'bg-white border-sb-blue/20 hover:border-sb-blue'
                                        }`}>
                                        <div className="flex items-center gap-3 flex-1 cursor-pointer" onClick={() => toggleTodo(todo.id)}>
                                            <div className={`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-colors ${todo.done ? 'bg-sb-teal border-sb-teal text-white' : 'border-gray-300 bg-white'
                                                }`}>
                                                {todo.done && <Icons.CheckSquare className="w-4 h-4" />}
                                            </div>
                                            <span className={`font-bold text-lg transition-all ${todo.done ? 'text-gray-400 line-through' : 'text-gray-700'
                                                }`}>
                                                <span>{todo.text}</span>
                                            </span>
                                        </div>
                                        <button
                                            onClick={() => deleteTodo(todo.id)}
                                            className="text-gray-400 hover:text-sb-red p-2 rounded-lg hover:bg-red-50 transition-colors"
                                        >
                                            <Icons.Trash className="w-5 h-5" />
                                        </button>
                                    </div>
                                ))}
                                {todos.length === 0 && (
                                    <div className="text-center text-gray-400 py-8 font-bold">
                                        <span>æº–å‚™è¬å…¨ï¼Œå‡ºç™¼ï¼ ğŸš€</span>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const Tabs = ({ activeTab, onTabChange }) => {
            const tabs = [
                { id: "itinerary", label: "è¡Œç¨‹è¡¨", icon: Icons.Calendar },
                { id: "logistics", label: "ä½å®¿èˆ‡èˆªç­", icon: Icons.Hotel },
                { id: "budget", label: "é ç®—è¡¨", icon: Icons.Wallet },
                { id: "todo", label: "è¡Œå‰æº–å‚™", icon: Icons.CheckSquare },
            ];

            return (
                <div className="flex justify-center mb-8 px-4 overflow-x-auto scrollbar-hide">
                    <div className="flex space-x-2 sm:space-x-4 bg-white/30 p-2 rounded-full backdrop-blur-sm border-2 border-white/40">
                        {tabs.map((tab) => (
                            <button
                                key={tab.id}
                                onClick={() => onTabChange(tab.id)}
                                className={`flex items-center px-4 sm:px-6 py-3 rounded-full text-sm sm:text-base font-bold transition-all border-2 shadow-cartoon-hover whitespace-nowrap ${activeTab === tab.id
                                        ? "bg-sb-pink text-white border-white transform -translate-y-1"
                                        : "bg-white text-gray-400 border-transparent hover:bg-sb-yellow hover:text-sb-brown hover:border-white"
                                    }`}
                            >
                                <span className="mr-2 hidden sm:inline"><tab.icon className="w-6 h-6" /></span>
                                <span>{tab.label}</span>
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        const ItineraryView = ({ data }) => {
            const [activeDay, setActiveDay] = useState(data[0]?.day || 1);
            const [nextEventId, setNextEventId] = useState(null);

            useEffect(() => {
                const now = new Date();
                // æ¸¬è©¦ç”¨ï¼šè§£é™¤è¨»è§£ä¸‹ä¸€è¡Œå¯æ¨¡æ“¬ç‰¹å®šæ™‚é–“
                // const now = new Date("2025-12-31T14:00:00"); 

                let target = null;
                let minDiff = Infinity;

                // 1. å…ˆæ‰¾ã€Œæ­£åœ¨é€²è¡Œä¸­ã€
                for (const day of data) {
                    for (let idx = 0; idx < day.events.length; idx++) {
                        const event = day.events[idx];
                        const start = new Date(`${day.dateStr}T${event.time}:00`);

                        // è¨ˆç®—çµæŸæ™‚é–“
                        let end;
                        if (event.endTime) {
                            const [endH, endM] = event.endTime.split(':').map(Number);
                            const [startH, startM] = event.time.split(':').map(Number);
                            let endDateStr = day.dateStr;
                            // ç°¡å–®è™•ç†è·¨æ—¥ï¼šå¦‚æœçµæŸå°æ™‚å°æ–¼é–‹å§‹å°æ™‚ï¼Œå‡è¨­è·¨åˆ°éš”å¤©
                            if (endH < startH) {
                                const d = new Date(day.dateStr);
                                d.setDate(d.getDate() + 1);
                                endDateStr = d.toISOString().split('T')[0];
                            }
                            end = new Date(`${endDateStr}T${event.endTime}:00`);
                        } else {
                            // æ²’å¯«çµæŸæ™‚é–“é è¨­ 1 å°æ™‚
                            end = new Date(start.getTime() + 60 * 60 * 1000);
                        }

                        if (now >= start && now <= end) {
                            target = { day: day.day, idx, type: 'ongoing' };
                            break;
                        }
                    }
                    if (target) break;
                }

                // 2. å¦‚æœæ²’æœ‰æ­£åœ¨é€²è¡Œï¼Œæ‰¾ã€Œæœ€è¿‘çš„æœªä¾†ã€
                if (!target) {
                    for (const day of data) {
                        for (let idx = 0; idx < day.events.length; idx++) {
                            const event = day.events[idx];
                            const start = new Date(`${day.dateStr}T${event.time}:00`);
                            const diff = start - now;

                            if (diff > 0 && diff < minDiff) {
                                minDiff = diff;
                                target = { day: day.day, idx, type: 'upcoming' };
                            }
                        }
                    }
                }

                if (target) {
                    setNextEventId(target);
                    setActiveDay(target.day);

                    // å˜—è©¦æ²å‹•åˆ°è©²å…ƒç´  (éœ€ç­‰å¾… render)
                    setTimeout(() => {
                        const element = document.getElementById(`event-${target.day}-${target.idx}`);
                        if (element) {
                            element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        }
                    }, 500); // å»¶é²ç¢ºä¿ DOM å·²æ›è¼‰
                }
            }, [data]);

            const currentDay = data.find(d => d.day === activeDay) || data[0];

            return (
                <div className="max-w-3xl mx-auto">
                    <div className="flex overflow-x-auto gap-3 mb-8 pb-4 scrollbar-hide justify-start sm:justify-center px-4">
                        {data.map((day) => (
                            <button
                                key={day.day}
                                onClick={() => setActiveDay(day.day)}
                                className={`flex-shrink-0 px-5 py-3 rounded-2xl text-sm font-bold transition-all whitespace-nowrap border-4 relative overflow-hidden group ${activeDay === day.day
                                        ? "bg-sb-yellow border-white text-sb-brown shadow-cartoon scale-110 z-10"
                                        : "bg-white/80 border-white/50 text-gray-400 hover:bg-white hover:text-sb-teal hover:border-white hover:-translate-y-1"
                                    }`}
                            >
                                <span className="block text-xs uppercase opacity-70"><span>Day</span> <span>{day.day}</span></span>
                                <span className="text-lg"><span>{day.date.split(' ')[0]}</span></span>
                            </button>
                        ))}
                    </div>

                    <div className="animate-fade-in px-2">
                        <div className="mb-8 flex items-center justify-center">
                            <div className="bg-white/90 px-8 py-3 rounded-full border-4 border-white shadow-cartoon text-center">
                                <h2 className="text-2xl font-black text-sb-teal inline-block mr-3"><span>{currentDay.date}</span></h2>
                                <span className="text-sm font-bold text-gray-400 bg-gray-100 px-3 py-1 rounded-full">
                                    <span>{currentDay.events.length}</span> <span>å€‹ä»»å‹™</span>
                                </span>
                            </div>
                        </div>

                        <div className="relative">
                            {currentDay.events.map((event, idx) => {
                                const isNext = nextEventId && nextEventId.day === currentDay.day && nextEventId.idx === idx;
                                return (
                                    <EventItem
                                        key={idx}
                                        event={{ ...event, dateStr: currentDay.dateStr }}
                                        isNext={isNext}
                                        eventId={`event-${currentDay.day}-${idx}`}
                                    />
                                );
                            })}
                        </div>
                    </div>
                </div>
            );
        };

        const LogisticsView = ({ flights, hotels }) => {
            return (
                <div className="max-w-5xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-8 px-4">
                    <div className="bg-white rounded-[40px] shadow-cartoon border-4 border-white overflow-hidden relative">
                        <div className="absolute top-0 right-0 p-6 opacity-10 rotate-12">
                            <Icons.Plane className="w-24 h-24" />
                        </div>
                        <div className="bg-sb-blue p-6 border-b-4 border-white flex items-center">
                            <div className="bg-white p-3 rounded-full shadow-md mr-4 text-sb-blue">
                                <Icons.Plane className="w-6 h-6" />
                            </div>
                            <h3 className="font-black text-white text-xl tracking-wider"><span>èˆªç­è³‡è¨Š</span></h3>
                        </div>
                        <div className="p-6 space-y-6">
                            {flights.map((flight, idx) => (
                                <div key={idx} className="bg-blue-50/50 p-5 rounded-3xl border-2 border-blue-100 hover:border-sb-blue transition-colors">
                                    <div className="flex justify-between items-center mb-4">
                                        <span className="text-xs font-black text-white bg-sb-blue px-3 py-1 rounded-full uppercase"><span>{flight.type}</span></span>
                                        <span className="font-mono font-black text-2xl text-sb-blue"><span>{flight.code}</span></span>
                                    </div>
                                    <div className="flex items-center justify-between text-gray-700 my-4">
                                        <div className="text-center w-1/3">
                                            <div className="text-3xl font-black"><span>{flight.from}</span></div>
                                            <div className="text-xs font-bold text-gray-400 mt-1 bg-white px-2 py-0.5 rounded-full inline-block"><span>å‡ºç™¼</span></div>
                                        </div>
                                        <div className="flex-1 flex justify-center text-sb-blue/30">
                                            <Icons.ArrowRight className="w-8 h-8" />
                                        </div>
                                        <div className="text-center w-1/3">
                                            <div className="text-3xl font-black"><span>{flight.to}</span></div>
                                            <div className="text-xs font-bold text-gray-400 mt-1 bg-white px-2 py-0.5 rounded-full inline-block"><span>æŠµé”</span></div>
                                        </div>
                                    </div>
                                    <div className="flex justify-between text-sm font-bold text-gray-500 pt-4 border-t-2 border-blue-100 border-dashed">
                                        <span className="flex items-center"><Icons.Clock className="w-4 h-4 mr-1" /><span className="font-mono"><span>{flight.time}</span></span></span>
                                        <span className="bg-white px-3 py-1 rounded-full border border-blue-100 text-sb-blue"><span>åº§ä½: </span><span>{flight.seat}</span></span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="bg-white rounded-[40px] shadow-cartoon border-4 border-white overflow-hidden relative">
                        <div className="absolute top-0 right-0 p-6 opacity-10 rotate-12">
                            <Icons.Hotel className="w-24 h-24" />
                        </div>
                        <div className="bg-sb-pink p-6 border-b-4 border-white flex items-center">
                            <div className="bg-white p-3 rounded-full shadow-md mr-4 text-sb-pink">
                                <Icons.Hotel className="w-6 h-6" />
                            </div>
                            <h3 className="font-black text-white text-xl tracking-wider"><span>ä½å®¿å®‰æ’</span></h3>
                        </div>
                        <div className="p-6 space-y-4">
                            {hotels.map((hotel, idx) => (
                                <div key={idx} className="group p-5 rounded-3xl border-2 border-transparent hover:bg-orange-50 hover:border-orange-100 transition-all">
                                    <div className="flex justify-between items-start mb-2">
                                        <span className="text-xs font-bold text-white bg-sb-pink px-3 py-1 rounded-full"><span>{hotel.date}</span></span>
                                        <span className="font-mono text-lg font-black text-sb-brown"><span>Â¥</span><span>{hotel.price}</span></span>
                                    </div>
                                    <h4 className="font-black text-gray-800 text-lg mb-2 group-hover:text-sb-pink transition-colors"><span>{hotel.name}</span></h4>
                                    <div className="flex flex-col gap-2 text-sm font-bold text-gray-500">
                                        <div className="flex items-center"><span className="mr-2 text-gray-300"><Icons.MapPin className="w-4 h-4" /></span><span>{hotel.area}</span></div>
                                        <div className="flex items-center text-xs text-gray-400 bg-gray-50 p-2 rounded-xl border border-gray-100"><span className="mr-2"><Icons.Info className="w-3 h-3" /></span><span>{hotel.note}</span></div>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const BudgetView = ({ budget }) => {
            const total = budget.reduce((sum, item) => sum + item.twd, 0);

            return (
                <div className="max-w-4xl mx-auto px-4">
                    <div className="bg-white rounded-[40px] shadow-cartoon border-4 border-white overflow-hidden">
                        <div className="bg-sb-plankton p-6 border-b-4 border-white flex justify-between items-center">
                            <h3 className="font-black text-white text-xl tracking-wider flex items-center">
                                <span className="bg-white/20 p-2 rounded-xl mr-3"><Icons.Wallet className="w-6 h-6" /></span> <span>é ä¼°è²»ç”¨</span>
                            </h3>
                            <div className="text-white/80 text-sm font-bold bg-black/20 px-4 py-2 rounded-full">
                                <span>èŸ¹è€é—†æœƒå¾ˆé–‹å¿ƒ ğŸ¦€</span>
                            </div>
                        </div>

                        <div className="overflow-x-auto">
                            <table className="w-full text-left">
                                <thead>
                                    <tr className="text-gray-400 text-xs font-black uppercase tracking-wider border-b-2 border-gray-100">
                                        <th className="px-8 py-5"><span>é …ç›®</span></th>
                                        <th className="px-8 py-5 text-right"><span>é‡‘é¡ (TWD)</span></th>
                                        <th className="px-8 py-5 pl-8"><span>å‚™è¨»</span></th>
                                    </tr>
                                </thead>
                                <tbody className="text-sm font-bold text-gray-600 divide-y-2 divide-gray-50/50">
                                    {budget.map((item, idx) => (
                                        <tr key={idx} className="hover:bg-green-50 transition-colors">
                                            <td className="px-8 py-5 text-gray-800"><span>{item.item}</span></td>
                                            <td className="px-8 py-5 text-right font-mono font-black text-sb-plankton text-base"><span>{item.twd.toLocaleString()}</span></td>
                                            <td className="px-8 py-5 pl-8 text-gray-400 text-xs"><span>{item.note}</span></td>
                                        </tr>
                                    ))}
                                </tbody>
                                <tfoot>
                                    <tr className="bg-green-50 border-t-4 border-green-100">
                                        <td className="px-8 py-6 font-black text-xl text-gray-800"><span>ç¸½è¨ˆé ä¼°</span></td>
                                        <td className="px-8 py-6 text-right font-mono text-3xl font-black text-sb-plankton"><span>{total.toLocaleString()}</span></td>
                                        <td></td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState("itinerary");

            useEffect(() => {
                // Remove lucide.createIcons() call
            }, [activeTab]);

            return (
                <div className="min-h-screen pb-12 relative z-10">
                    {/* Header */}
                    <div className="sticky top-0 z-50 mb-8 pt-4 px-4">
                        <div className="max-w-4xl mx-auto bg-white/90 backdrop-blur-md rounded-full shadow-cartoon border-4 border-white px-6 py-3 flex items-center justify-between">
                            <h1 className="text-xl font-black text-sb-blue flex items-center tracking-tight">
                                <span className="bg-sb-yellow text-sb-brown w-10 h-10 rounded-full flex items-center justify-center mr-3 text-lg shadow-sm border-2 border-white">
                                    <Icons.Anchor className="w-6 h-6" />
                                </span>
                                <span>{TRIP_DATA.meta.title}</span>
                            </h1>
                            <div className="hidden sm:flex items-center text-xs font-bold text-gray-500 bg-gray-100 px-4 py-2 rounded-full border-2 border-white shadow-inner">
                                <span className="mr-2"><Icons.Calendar className="w-3 h-3" /></span>
                                <span>{TRIP_DATA.meta.dates}</span>
                            </div>
                        </div>
                    </div>

                    <div className="max-w-5xl mx-auto">
                        {/* å°èˆª */}
                        <Tabs activeTab={activeTab} onTabChange={setActiveTab} />

                        {/* å…§å®¹å€ */}
                        <div className="animate-fade-in">
                            {activeTab === "itinerary" && <ItineraryView data={TRIP_DATA.itinerary} />}
                            {activeTab === "logistics" && <LogisticsView flights={TRIP_DATA.flights} hotels={TRIP_DATA.hotels} />}
                            {activeTab === "budget" && <BudgetView budget={TRIP_DATA.budget} />}
                            {activeTab === "todo" && <TodoView />}
                        </div>
                    </div>

                    <div className="text-center py-12 text-white font-bold opacity-80 text-sm">
                        <span>æº–å‚™å¥½å»æŠ“æ°´æ¯äº†å—ï¼Ÿ ğŸª¼</span>
                    </div>

                    {/* èƒŒæ™¯æ’åœ– */}
                    <BackgroundEffects />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>