<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã„ã„œË‹çš„æ²–ç¹©äº”å¤©å››å¤œä¹‹æ—… ğŸŒº</title>
    <!-- å¼•å…¥ React èˆ‡ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- å¼•å…¥ Babel ç”¨æ–¼è§£æ JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- å¼•å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        okinawa: {
                            sea: '#00A3AF', // æ²–ç¹©æµ·è—
                            sky: '#89c3eb',
                            sand: '#fcfbf6',
                            coral: '#f08080', // çŠç‘šç´…
                            sun: '#ffa500',   // å¤ªé™½æ©™
                            teal: '#20b2aa',
                        }
                    },
                    animation: {
                        'wave': 'wave 3s linear infinite',
                        'float': 'float 3s ease-in-out infinite',
                    },
                    keyframes: {
                        wave: {
                            '0%': { transform: 'translateX(0)' },
                            '100%': { transform: 'translateX(-50%)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-5px)' },
                        }
                    }
                }
            }
        }
    </script>
    <!-- å¼•å…¥ Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        /* è‡ªå®šç¾©æ²è»¸æ¨£å¼ */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f0fdfa;
        }

        ::-webkit-scrollbar-thumb {
            background: #99f6e4;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #5eead4;
        }

        body {
            font-family: "Noto Sans TC", "Hiragino Sans", sans-serif;
            background-color: #f0fdfa;
            /* æ·ºé’è‰²èƒŒæ™¯ */
            background-image: radial-gradient(#ccfbf1 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .animate-fade-in {
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* éš±è—æ©«å‘æ²è»¸ä½†ä¿ç•™åŠŸèƒ½ (for Tabs) */
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }

        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // åœ–æ¨™çµ„ä»¶å°è£
        const Icons = {
            Plane: () => <i data-lucide="plane" className="w-5 h-5"></i>,
            Hotel: () => <i data-lucide="bed-double" className="w-5 h-5"></i>,
            Car: () => <i data-lucide="car" className="w-5 h-5"></i>,
            MapPin: () => <i data-lucide="map-pin" className="w-5 h-5"></i>,
            Clock: () => <i data-lucide="clock" className="w-5 h-5"></i>,
            Wallet: () => <i data-lucide="wallet" className="w-5 h-5"></i>,
            Calendar: () => <i data-lucide="calendar" className="w-5 h-5"></i>,
            Utensils: () => <i data-lucide="utensils" className="w-5 h-5"></i>,
            Info: () => <i data-lucide="info" className="w-4 h-4"></i>,
            ArrowRight: () => <i data-lucide="arrow-right" className="w-4 h-4"></i>,
            X: () => <i data-lucide="x" className="w-5 h-5"></i>,
            MessageSquare: () => <i data-lucide="message-square" className="w-5 h-5"></i>,
            Map: () => <i data-lucide="map" className="w-4 h-4"></i>,
            ExternalLink: () => <i data-lucide="external-link" className="w-3 h-3"></i>,
            FileText: () => <i data-lucide="file-text" className="w-5 h-5"></i>,
            Printer: () => <i data-lucide="printer" className="w-4 h-4"></i>,
            Timer: () => <i data-lucide="timer" className="w-4 h-4"></i>,
            Sun: () => <i data-lucide="sun" className="w-6 h-6"></i>,
            Waves: () => <i data-lucide="waves" className="w-5 h-5"></i>,
        };

        // æ¨¡æ“¬æ•¸æ“š
        const TRIP_DATA = {
            meta: {
                title: "æ²–ç¹©äº”å¤©å››å¤œè·¨å¹´ä¹‹æ—…",
                dates: "2025/12/30 (äºŒ) - 2026/01/03 (å…­)",
                travelers: 2,
                rate: 0.21 // åŒ¯ç‡
            },
            flights: [
                { type: "å»ç¨‹", code: "IT230", date: "12/30", time: "06:35 - 08:55", seat: "5AB", from: "TPE", to: "OKA" },
                { type: "å›ç¨‹", code: "IT233", date: "01/03", time: "21:30 - 22:05", seat: "28AB", from: "OKA", to: "TPE" }
            ],
            hotels: [
                { date: "12/30 (äºŒ)", name: "HOTEL NAHA CITY", area: "é‚£éœ¸", price: 6881, currency: "JPY", note: "åœè»Š Â¥1000/æ—¥" },
                { date: "12/31 (ä¸‰)", name: "HOTEL YUQUESTA AGARIMACHI", area: "é‚£éœ¸", price: 8100, currency: "JPY", note: "å«æ—©é¤" },
                { date: "01/01 (å››)", name: "è¶…ç´šé£¯åº— (Super Hotel)", area: "åè­·", price: 5440, currency: "JPY", note: "ææ—©åˆ°é¸æ•é ­ (é ä¼°åƒ¹æ ¼)" },
                { date: "01/02 (äº”)", name: "é‚£éœ¸å€«å‹ƒæœ—é¢¨æ ¼é£¯åº—", area: "é‚£éœ¸", price: 4710, currency: "JPY", note: "Rembrandt Style Naha" }
            ],
            itinerary: [
                {
                    day: 1,
                    date: "12/30 (äºŒ)",
                    dateStr: "2025-12-30",
                    events: [
                        { time: "06:35", endTime: "08:55", title: "æŠµé”é‚£éœ¸æ©Ÿå ´", type: "transport", location: "é‚£éœ¸æ©Ÿå ´", cost: 0, note: "èˆªç­ IT230" },
                        {
                            time: "09:30",
                            endTime: "10:00",
                            title: "ç§Ÿè»Šå–è»Š",
                            type: "transport",
                            location: "Brother Rent-A-Car (ãƒ–ãƒ©ã‚¶ãƒ¼ãƒ¬ãƒ³ã‚¿ã‚«ãƒ¼)",
                            mapLocation: "æ²–ç¸„çœŒé‚£è¦‡å¸‚ç”°åŸ3-1-8",
                            cost: 25470,
                            note: "é è¨ˆ1å°æ™‚ï¼Œå«ä¿éšªã€‚è²»ç”¨ï¼š$5,349 TWD",
                            mapLink: "https://maps.app.goo.gl/zqpsHZkhGTZXQbEd7"
                        },
                        { time: "10:30", endTime: "11:30", title: "æ—©åˆé¤ï¼šå®¢ç¾å¤šå’–å•¡", type: "meal", location: "å®¢ç¾å¤šå’–å•¡ æ²–ç¹©ç³¸æ»¿åº—", cost: 1000, note: "åœç•™ç´„1å°æ™‚" },
                        { time: "12:00", endTime: "15:30", title: "æ²–ç¹©ä¸–ç•Œ - ç‰æ³‰æ´", type: "activity", location: "æ²–ç¹©ä¸–ç•Œ æ–‡åŒ–ç‹åœ‹ãƒ»ç‰æ³‰æ´", cost: 0, note: "13:30 æ¯’è›‡ç§€ï¼Œé è¨ˆåœç•™3å°æ™‚" },
                        { time: "15:40", endTime: "16:30", title: "å¥§æ­¦å³¶è§€å…‰", type: "activity", location: "å¥§æ­¦å³¶", cost: 0, note: "åœç•™ç´„1å°æ™‚ï¼Œåƒç‚¸ç‰©" },
                        {
                            time: "17:00",
                            endTime: "18:00",
                            title: "Ricoland Okinawa",
                            type: "activity",
                            location: "Ricoland Okinawa",
                            mapLocation: "Ricoland Okinawa",
                            cost: 0,
                            note: "æ©Ÿè»Šç”¨å“åº—ï¼Œåœç•™1å°æ™‚"
                        },
                        {
                            time: "18:00",
                            endTime: "19:00",
                            title: "é£¯åº— Check-in",
                            type: "transport",
                            location: "HOTEL NAHA CITY",
                            mapLocation: "1 Chome-4-5 Matsuo, Naha, Okinawa 900-0014æ—¥æœ¬",
                            cost: 6881,
                            note: "åœè»Šè²»ç”¨ Â¥1000/æ—¥ã€‚å‚™è¨»ï¼š10Få¸è¸å€"
                        },
                        {
                            time: "18:40",
                            endTime: "20:30",
                            title: "æ™šé¤ï¼šBuchi Kumojiten (çƒ¤è‚‰)",
                            type: "meal",
                            location: "Yakiniku Buchi Kumoji (ç‡’è‚‰ Buchi ä¹…èŒ‚åœ°åº—)",
                            mapLocation: "Yakiniku Buchi Kumoji",
                            cost: 5000,
                            note: "ã€å·²é è¨‚ã€‘18:40ã€‚å¿…é»ï¼šç”Ÿç‰›è‚‰èµ¤èº«ã€åœŸé‹é£¯ã€‚(æé†’ï¼šè¨‚äº†å…©å®¶ï¼Œéœ€é¸ä¸€å®¶)"
                        }
                    ]
                },
                {
                    day: 2,
                    date: "12/31 (ä¸‰)",
                    dateStr: "2025-12-31",
                    events: [
                        {
                            time: "07:00",
                            endTime: "07:30",
                            title: "æ—©é¤ï¼šç¦åŠ©ç‰å­ç‡’ æˆ– è±¬è‚‰è›‹é£¯ç³°",
                            type: "meal",
                            location: "ç‰§å¿—å¸‚å ´å‘¨é‚Š",
                            cost: 1000,
                            note: "èµ°è·¯10åˆ†é˜ã€‚ç¦åŠ©7:30é–‹ / é£¯ç³°7:00é–‹"
                        },
                        {
                            time: "09:00",
                            endTime: "13:00",
                            title: "Parco City é€›è¡—",
                            type: "activity",
                            location: "æµ¦æ·»è¥¿æµ·å²¸ PARCO CITY",
                            cost: 5000,
                            note: "åœè»Šå…è²»ã€‚é–‹è»Šç´„20åˆ†é˜"
                        },
                        {
                            time: "13:30",
                            endTime: "14:30",
                            title: "åˆé¤ï¼šæ•˜æ•˜è‹‘ç‡’è‚‰",
                            type: "meal",
                            location: "æ•˜æ•˜è‹‘ æ²–ç¹©æµ¦æ·»PARCO CITYåº—",
                            cost: 3000,
                            note: "ã€å·²é è¨‚ã€‘é ç´„ 13:30"
                        },
                        {
                            time: "15:00",
                            endTime: "16:00",
                            title: "æ¼«ç•«å€‰åº« / æ¸¯å·å¤–äººä½å®…",
                            type: "activity",
                            location: "æ¸¯å·å¤–äººä½å®…è¡—",
                            cost: 300,
                            note: "æµ¦æ·»å€ã€‚é–‹è»Šç´„9åˆ†é˜"
                        },
                        {
                            time: "18:30",
                            endTime: "19:00",
                            title: "é£¯åº— Check-in",
                            type: "transport",
                            location: "HOTEL YUQUESTA AGARIMACHI",
                            mapLocation: "7-22 Higashimachi, Naha, Okinawa 900-0034æ—¥æœ¬",
                            cost: 0,
                            note: "éœ€æ‰¾åœè»Šå ´ï¼Œç›¡é‡æ—©å›"
                        },
                        {
                            time: "20:00",
                            endTime: "21:30",
                            title: "æ™šé¤ï¼šLITOR",
                            type: "meal",
                            location: "LITOR",
                            cost: 2000,
                            note: "ã€å·²é è¨‚ã€‘é ç´„ 20:00ã€‚ä¸èƒ½é²åˆ°ï¼(é²åˆ°ç•¶å¤©é€€è²»ä¹Ÿæ‰£éŒ¢)"
                        },
                        {
                            time: "22:00",
                            endTime: "00:30",
                            title: "è·¨å¹´æ´»å‹•ï¼šChurasun 6",
                            type: "activity",
                            location: "Churasun 6",
                            mapLocation: "Churasun 6, Naha",
                            cost: 4500,
                            note: "ã€å·²é è¨‚ã€‘é ç´„ 22:00 (22:30 é–‹å§‹)"
                        }
                    ]
                },
                {
                    day: 3,
                    date: "01/01 (å››)",
                    dateStr: "2026-01-01",
                    events: [
                        { time: "08:00", endTime: "08:30", title: "æ—©é¤ï¼šA&W æ¼¢å ¡", type: "meal", location: "A&W ç‰§æ¸¯åº—", cost: 300, note: "å…ƒæ—¦æ—©é¤" },
                        { time: "09:00", endTime: "09:30", title: "è¬åº§æ¯›", type: "activity", location: "è¬åº§æ¯›", cost: 100, note: "å¯ä»¥ä¸å»ï¼Œå¯èƒ½æœƒå¾ˆè¶•ï¼Œä¸ç„¶è¦æ›´æ—©å‡ºé–€" },
                        {
                            time: "12:00",
                            endTime: "12:30",
                            title: "åˆé¤ï¼šè¨±ç”°ä¼‘æ¯ç«™ æˆ– CAMEL SANDWICH",
                            type: "meal",
                            location: "è¨±ç”°ä¼‘æ¯ç«™",
                            cost: 300,
                            note: "éš¨æ„åƒæˆ–åƒä¸‰æ˜æ²»"
                        },
                        {
                            time: "14:00",
                            endTime: "17:00",
                            title: "ç¾éº—æµ·æ°´æ—é¤¨",
                            type: "activity",
                            location: "æ²–ç¹©ç¾éº—æµ·æ°´æ—é¤¨",
                            cost: 2200,
                            note: "ã€æ”»ç•¥ã€‘P7åŒ—åœè»Šå ´æœ€è¿‘ã€‚13:20æ’éšŠé¤µæµ·è±šã€14:00é¤µæµ·é¾œã€15:00é¯¨é¯Šé¤µé£Ÿ(é»‘æ½®ä¹‹æµ·)ã€17:00æµ·è±šè¡¨æ¼”"
                        },
                        {
                            time: "18:00",
                            endTime: "18:30",
                            title: "é£¯åº— Check-in",
                            type: "transport",
                            location: "Super Hotel Nago",
                            mapLocation: "Super Hotel Okinawa Nago",
                            cost: 5440,
                            note: "ææ—©åˆ°é¸æ•é ­ã€‚è¶…ç´šé£¯åº—(åè­·)"
                        },
                        {
                            time: "19:00",
                            endTime: "21:00",
                            title: "æ™šé¤ï¼šç™¾å¹´å¤å®¶ å¤§å®¶ (é˜¿å¤è±¬)",
                            type: "meal",
                            location: "Ufuya (ç™¾å¹´å¤å®¶ å¤§å®¶)",
                            mapLocation: "Ufuya, Nago",
                            cost: 4880,
                            note: "ã€å·²é è¨‚ã€‘é ç´„ 19:30"
                        }
                    ]
                },
                {
                    day: 4,
                    date: "01/02 (äº”)",
                    dateStr: "2026-01-02",
                    events: [
                        { time: "07:00", endTime: "09:30", title: "æ—©é¤ï¼šé£¯åº—æ—©é¤", type: "meal", location: "Super Hotel Nago", cost: 0, note: "" },
                        {
                            time: "09:00",
                            endTime: "10:00",
                            title: "å¤å®‡åˆ©æµ·æ´‹å¡”",
                            type: "activity",
                            location: "å¤å®‡åˆ©æµ·æ´‹å¡”",
                            cost: 1000,
                            note: "æ¬£è³é¢¨æ™¯"
                        },
                        {
                            time: "11:30",
                            endTime: "12:00",
                            title: "åˆé¤ï¼šå¤å®‡åˆ©è¦è¦é£¯",
                            type: "meal",
                            location: "Kouri Shrimp",
                            mapLocation: "Kouri Shrimp Wagon",
                            cost: 2160,
                            note: "é™„è¿‘é‚„æœ‰ NoBi"
                        },
                        {
                            time: "13:30",
                            endTime: "14:30",
                            title: "ç¾åœ‹æ‘",
                            type: "activity",
                            location: "ç¾åœ‹æ‘",
                            mapLocation: "American Village Okinawa",
                            cost: 1500,
                            note: "é€›è¡—æ‹ç…§"
                        },
                        {
                            time: "15:00",
                            endTime: "16:00",
                            title: "æ°¸æ—ºå¤¢æ¨‚åŸ (Aeon Mall)",
                            type: "activity",
                            location: "AEON MALL Okinawa Rycom",
                            cost: 5000,
                            note: "å¤§å‹è³¼ç‰©ä¸­å¿ƒ"
                        },
                        {
                            time: "19:00",
                            endTime: "20:00",
                            title: "æ™šé¤ï¼šå‚‘å…‹ç‰›æ’",
                            type: "meal",
                            location: "Jack's Steak House (å‚‘å…‹ç‰›æ’ é‚£éœ¸åº—)",
                            mapLocation: "Jack's Steak House Naha Okinawa",
                            cost: 3000,
                            note: "å¯ä»¥19:00å…ˆå»åƒï¼Œå† Check-in èµ°å›å»"
                        },
                        {
                            time: "19:30",
                            endTime: "21:00",
                            title: "é£¯åº— Check-in",
                            type: "transport",
                            location: "Rembrandt Style Naha",
                            mapLocation: "Rembrandt Style Naha",
                            cost: 4710,
                            note: "é‚£éœ¸å€«å‹ƒæœ—é¢¨æ ¼é£¯åº—"
                        }
                    ]
                },
                {
                    day: 5,
                    date: "01/03 (å…­)",
                    dateStr: "2026-01-03",
                    events: [
                        { time: "07:00", endTime: "09:30", title: "æ—©é¤ï¼šé£¯åº—æ—©é¤", type: "meal", location: "Rembrandt Style Naha", cost: 0, note: "" },
                        { time: "09:30", endTime: "10:00", title: "æ³¢ä¸Šå®®", type: "activity", location: "æ³¢ä¸Šå®®", cost: 0, note: "åƒæ‹œæ‹ç…§" },
                        {
                            time: "10:00",
                            endTime: "11:00",
                            title: "æ—©åˆé¤ï¼šå¹¸ç¦é¬†é¤…",
                            type: "meal",
                            location: "A Happy Pancake Umikaji Terrace",
                            cost: 2000,
                            note: "è·¯é‚Šåœè»Šå…è²»ï¼Œéœ€æ’éšŠ"
                        },
                        {
                            time: "12:00",
                            endTime: "13:00",
                            title: "è³¼ç‰©ï¼šiias æ²–ç¹©è±å´",
                            type: "activity",
                            location: "iias Okinawa Toyosaki",
                            cost: 5000,
                            note: "æœ€å¾Œæ¡è²·"
                        },
                        {
                            time: "16:30",
                            endTime: "17:00",
                            title: "è³¼ç‰©ï¼šWorkman",
                            type: "activity",
                            location: "Workman Plus",
                            cost: 5000,
                            note: "æ©Ÿèƒ½æœé£¾"
                        },
                        { time: "17:00", endTime: "18:00", title: "é‚„è»Š/å‰å¾€æ©Ÿå ´", type: "transport", location: "é‚£éœ¸æ©Ÿå ´", cost: 0, note: "éœ€é ç•™é‚„è»Šæ™‚é–“" },
                        { time: "21:30", endTime: "22:05", title: "è¿”ç¨‹èˆªç­", type: "transport", location: "IT233", cost: 0, note: "21:30 èµ·é£›" }
                    ]
                }
            ],
            budget: [
                { item: "æ©Ÿç¥¨ (å·²ä»˜)", twd: 17902, note: "äºŒäººç¸½è¨ˆ" },
                { item: "ç§Ÿè»Š (5å¤©4å¤œ)", twd: 5348, note: "é ä¼° 25470 JPY" },
                { item: "ä½å®¿ (ç¸½è¨ˆ)", twd: 6416, note: "å››æ™šé ä¼°" },
                { item: "æ—¥æœ¬è­¯æ–‡é§•ç…§", twd: 256, note: "ç›£ç†æ‰€ç”³è«‹" },
                { item: "æ´»å‹•é–€ç¥¨", twd: 2000, note: "é ä¼°" },
                { item: "é¤é£²è²»ç”¨", twd: 10000, note: "é ä¼°" }
            ]
        };

        // æ–°å¢çµ„ä»¶ï¼šå€’æ•¸æ™‚é˜ (æ²–ç¹©é¢¨æ ¼)
        const CountdownTimer = ({ targetDateStr, targetTimeStr }) => {
            const [timeLeft, setTimeLeft] = useState("");

            useEffect(() => {
                const calculateTimeLeft = () => {
                    const target = new Date(`${targetDateStr}T${targetTimeStr}:00`);
                    const now = new Date();
                    const diff = target - now;

                    if (diff <= 0) {
                        return "00:00:00";
                    }

                    const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
                    const minutes = Math.floor((diff / 1000 / 60) % 60);
                    const seconds = Math.floor((diff / 1000) % 60);

                    if (days > 0) {
                        return `${days}å¤© ${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    }
                    return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                };

                setTimeLeft(calculateTimeLeft());
                const timer = setInterval(() => {
                    setTimeLeft(calculateTimeLeft());
                }, 1000);

                return () => clearInterval(timer);
            }, [targetDateStr, targetTimeStr]);

            return (
                <div className="flex flex-col items-center justify-center bg-white/95 backdrop-blur-sm px-4 py-2 rounded-2xl shadow-lg border-2 border-okinawa-coral min-w-[140px] transform hover:scale-105 transition-transform duration-300">
                    <div className="text-xs text-okinawa-coral font-bold mb-1 flex items-center">
                        <span className="mr-1 animate-spin-slow"><Icons.Sun /></span> å³å°‡é–‹å§‹
                    </div>
                    <div className="text-xl font-mono font-black text-gray-700 tracking-wider">
                        {timeLeft}
                    </div>
                </div>
            );
        };

        // æ–°å¢çµ„ä»¶ï¼šå–®å€‹è¡Œç¨‹é …ç›®
        const EventItem = ({ event, isNext }) => {
            const [isMapVisible, setIsMapVisible] = useState(false);

            const queryLocation = event.mapLocation || event.location;
            const mapQuery = encodeURIComponent(queryLocation);
            const mapUrl = `https://maps.google.com/maps?q=${mapQuery}&t=&z=15&ie=UTF8&iwloc=&output=embed`;
            const externalMapUrl = event.mapLink || `https://www.google.com/maps/search/?api=1&query=${mapQuery}`;

            // æ ¹æ“šé¡å‹æ±ºå®šé¡è‰²
            const getTypeColor = (type) => {
                switch (type) {
                    case 'meal': return 'bg-okinawa-sun';
                    case 'transport': return 'bg-gray-400';
                    default: return 'bg-okinawa-sea';
                }
            };

            const getIconColor = (type) => {
                switch (type) {
                    case 'meal': return 'text-okinawa-sun';
                    case 'transport': return 'text-gray-500';
                    default: return 'text-okinawa-sea';
                }
            }

            return (
                <div className={`relative pl-8 group ${isNext ? 'z-10' : ''}`}>
                    {/* æ™‚é–“è»¸åœ“é» */}
                    <div className={`absolute -left-[9px] top-1 w-4 h-4 rounded-full border-2 border-white shadow-sm transition-all duration-300 ${isNext
                            ? 'bg-okinawa-coral scale-125 ring-4 ring-red-100'
                            : getTypeColor(event.type)
                        }`}></div>

                    <div className={`flex flex-col sm:flex-row sm:items-start justify-between p-4 rounded-2xl transition-all duration-300 -mt-2 border border-transparent ${isNext
                            ? 'bg-white shadow-lg ring-2 ring-okinawa-coral border-okinawa-coral/20'
                            : 'bg-white hover:shadow-md border-gray-100 hover:border-teal-200'
                        }`}>
                        <div className="flex-1 w-full relative">
                            {/* å€’æ•¸è¨ˆæ™‚å™¨ */}
                            {isNext && (
                                <div className="absolute right-0 top-0 sm:-top-4 sm:-right-4 transform sm:translate-x-0 -translate-y-full sm:translate-y-0 z-20 mb-2 sm:mb-0">
                                    <CountdownTimer targetDateStr={event.dateStr} targetTimeStr={event.time} />
                                </div>
                            )}

                            <div className="flex items-center mb-2">
                                <span className={`font-mono text-sm font-bold w-24 flex-shrink-0 ${isNext ? 'text-okinawa-coral' : 'text-gray-400'}`}>
                                    {event.time}
                                </span>
                                <h4 className={`text-lg font-bold flex items-center ${isNext ? 'text-gray-800' : 'text-gray-700'}`}>
                                    {event.title}
                                </h4>
                            </div>

                            <div className="flex flex-col sm:flex-row text-sm text-gray-500 ml-0 sm:ml-24 space-y-2 sm:space-y-0 sm:space-x-6 mb-3">
                                <div className="flex items-center">
                                    <span className={`mr-1 ${getIconColor(event.type)}`}><Icons.MapPin /></span>
                                    {event.location}
                                </div>
                                {event.note && (
                                    <div className="flex items-center text-gray-500 bg-okinawa-sand px-3 py-1 rounded-full text-xs border border-teal-100">
                                        <span className="mr-1 text-okinawa-teal"><Icons.Info /></span>
                                        {event.note}
                                    </div>
                                )}
                            </div>

                            {/* æŒ‰éˆ•å€åŸŸ */}
                            <div className="ml-0 sm:ml-24 mt-2 sm:mt-0 flex flex-wrap gap-2">
                                <button
                                    onClick={() => setIsMapVisible(!isMapVisible)}
                                    className={`text-xs flex items-center px-4 py-2 rounded-full transition-colors font-medium border ${isMapVisible
                                            ? "bg-gray-100 text-gray-600 border-gray-300"
                                            : "bg-white text-okinawa-sea border-teal-200 hover:bg-teal-50"
                                        }`}
                                >
                                    <span className="mr-1"><Icons.Map /></span>
                                    {isMapVisible ? "æ”¶èµ·åœ°åœ–" : "æŸ¥çœ‹åœ°åœ–"}
                                </button>
                            </div>

                            {/* åœ°åœ–åµŒå…¥å€å¡Š */}
                            {isMapVisible && (
                                <div className="ml-0 sm:ml-24 mt-4 rounded-2xl overflow-hidden border-4 border-white shadow-lg bg-gray-100 animate-fade-in ring-1 ring-gray-200">
                                    <iframe
                                        width="100%"
                                        height="300"
                                        frameBorder="0"
                                        scrolling="no"
                                        marginHeight="0"
                                        marginWidth="0"
                                        src={mapUrl}
                                        title={`Map of ${event.location}`}
                                        className="w-full block grayscale-[0.2] hover:grayscale-0 transition-all duration-500"
                                    ></iframe>
                                    <div className="bg-white py-2 px-4 text-xs flex justify-end border-t border-gray-100">
                                        <a
                                            href={externalMapUrl}
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            className="flex items-center text-okinawa-sea hover:text-teal-700 font-bold transition-colors"
                                        >
                                            é–‹å•Ÿ Google Maps <span className="ml-1"><Icons.ExternalLink /></span>
                                        </a>
                                    </div>
                                </div>
                            )}
                        </div>

                        {/* è²»ç”¨é¡¯ç¤º */}
                        {(event.cost > 0) && (
                            <div className="mt-3 sm:mt-0 ml-0 sm:ml-4 text-right flex-shrink-0 bg-gray-50 px-3 py-1 rounded-lg">
                                <span className="text-[10px] text-gray-400 block uppercase tracking-wider">é ä¼°</span>
                                <span className="font-mono text-sm font-bold text-gray-600">Â¥{event.cost.toLocaleString()}</span>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // UI çµ„ä»¶ï¼šæ¨™ç±¤é åˆ‡æ›
        const Tabs = ({ activeTab, onTabChange }) => {
            const tabs = [
                { id: "itinerary", label: "è¡Œç¨‹è¡¨", icon: Icons.Calendar },
                { id: "logistics", label: "ä½å®¿èˆ‡èˆªç­", icon: Icons.Hotel },
                { id: "budget", label: "é ç®—æ¦‚è¦½", icon: Icons.Wallet },
            ];

            return (
                <div className="flex justify-center mb-8">
                    <div className="flex space-x-2 bg-white/60 p-2 rounded-full shadow-sm backdrop-blur-sm border border-white/50">
                        {tabs.map((tab) => (
                            <button
                                key={tab.id}
                                onClick={() => onTabChange(tab.id)}
                                className={`flex items-center justify-center px-6 py-2.5 text-sm font-bold rounded-full transition-all duration-300 ${activeTab === tab.id
                                        ? "bg-gradient-to-r from-okinawa-sea to-teal-400 text-white shadow-md transform scale-105"
                                        : "text-gray-500 hover:text-okinawa-sea hover:bg-white"
                                    }`}
                            >
                                <span className="mr-2"><tab.icon /></span>
                                {tab.label}
                            </button>
                        ))}
                    </div>
                </div>
            );
        };

        // UI çµ„ä»¶ï¼šè¡Œç¨‹æ™‚é–“è»¸
        const ItineraryView = ({ data }) => {
            const [activeDay, setActiveDay] = useState(data[0]?.day || 1);
            const [nextEventId, setNextEventId] = useState(null);

            // è¨ˆç®—æœ€è¿‘çš„è¡Œç¨‹
            useEffect(() => {
                const now = new Date();

                let closestEvent = null;
                let minDiff = Infinity;

                data.forEach(day => {
                    day.events.forEach((event, idx) => {
                        const eventTime = new Date(`${day.dateStr}T${event.time}:00`);
                        const diff = eventTime - now;

                        if (diff > 0 && diff < minDiff) {
                            minDiff = diff;
                            closestEvent = { day: day.day, idx: idx };
                        }
                    });
                });

                if (closestEvent) {
                    setNextEventId(closestEvent);
                }
            }, [data]);

            const currentDay = data.find(d => d.day === activeDay) || data[0];

            return (
                <div>
                    {/* å¤©æ•¸åˆ‡æ› Tab */}
                    <div className="flex overflow-x-auto space-x-4 mb-8 pb-4 scrollbar-hide px-2">
                        {data.map((day) => (
                            <button
                                key={day.day}
                                onClick={() => setActiveDay(day.day)}
                                className={`flex-shrink-0 px-5 py-3 rounded-2xl text-sm font-bold transition-all whitespace-nowrap border-2 relative overflow-hidden group ${activeDay === day.day
                                        ? "bg-white border-okinawa-sea text-okinawa-sea shadow-lg transform -translate-y-1"
                                        : "bg-white/80 text-gray-400 border-transparent hover:bg-white hover:text-gray-600"
                                    }`}
                            >
                                <div className="z-10 relative">
                                    <span className="block text-xs uppercase tracking-widest opacity-70">Day {day.day}</span>
                                    <span className="text-base">{day.date.split(' ')[0]}</span>
                                </div>
                                {activeDay === day.day && (
                                    <div className="absolute bottom-0 left-0 w-full h-1 bg-okinawa-sea"></div>
                                )}
                            </button>
                        ))}
                    </div>

                    {/* å–®æ—¥å…§å®¹ */}
                    <div className="animate-fade-in">
                        <div className="bg-white/80 backdrop-blur-md rounded-3xl shadow-xl border border-white p-2 sm:p-6 relative overflow-hidden">
                            {/* è£é£¾æ€§èƒŒæ™¯åœ–æ¡ˆ */}
                            <div className="absolute top-0 right-0 -mr-16 -mt-16 w-64 h-64 bg-gradient-to-br from-teal-100 to-transparent rounded-full opacity-50 blur-3xl pointer-events-none"></div>

                            <div className="px-4 py-4 mb-4 flex items-end border-b border-gray-100 relative z-10">
                                <span className="text-4xl font-black text-transparent bg-clip-text bg-gradient-to-r from-okinawa-sea to-teal-400 mr-4">Day {currentDay.day}</span>
                                <span className="text-gray-500 font-medium pb-2">{currentDay.date}</span>
                            </div>

                            <div className="relative border-l-2 border-teal-100 ml-4 sm:ml-6 space-y-8 pb-4">
                                {currentDay.events.map((event, idx) => {
                                    const isNext = nextEventId && nextEventId.day === currentDay.day && nextEventId.idx === idx;
                                    return (
                                        <EventItem
                                            key={idx}
                                            event={{ ...event, dateStr: currentDay.dateStr }}
                                            isNext={isNext}
                                        />
                                    );
                                })}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // UI çµ„ä»¶ï¼šä½å®¿èˆ‡èˆªç­
        const LogisticsView = ({ flights, hotels }) => {
            return (
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div className="bg-white/90 backdrop-blur rounded-3xl shadow-lg border border-white p-6 relative overflow-hidden group">
                        <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                            <Icons.Plane />
                        </div>
                        <h3 className="text-xl font-bold text-gray-800 mb-6 flex items-center">
                            <span className="bg-blue-100 text-blue-600 p-2 rounded-xl mr-3"><Icons.Plane /></span> èˆªç­è³‡è¨Š
                        </h3>
                        <div className="space-y-4">
                            {flights.map((flight, idx) => (
                                <div key={idx} className="bg-gradient-to-r from-blue-50 to-white p-5 rounded-2xl border border-blue-100">
                                    <div className="flex justify-between items-center mb-4">
                                        <span className="bg-blue-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-sm shadow-blue-200">{flight.type}</span>
                                        <span className="font-mono font-black text-2xl text-blue-900 tracking-tighter">{flight.code}</span>
                                    </div>
                                    <div className="flex justify-between items-center text-sm text-gray-700 mb-4">
                                        <div className="text-center">
                                            <div className="font-black text-3xl text-gray-800">{flight.from}</div>
                                            <div className="text-gray-400 text-xs mt-1">å‡ºç™¼</div>
                                        </div>
                                        <div className="px-4 text-blue-300"><Icons.ArrowRight /></div>
                                        <div className="text-center">
                                            <div className="font-black text-3xl text-gray-800">{flight.to}</div>
                                            <div className="text-gray-400 text-xs mt-1">æŠµé”</div>
                                        </div>
                                    </div>
                                    <div className="flex justify-between text-sm text-gray-600 border-t border-blue-100 pt-3">
                                        <span className="flex items-center"><Icons.Clock /><span className="ml-2 font-mono font-bold">{flight.time}</span></span>
                                        <span className="font-medium bg-white px-2 py-0.5 rounded border border-blue-100">Seat: {flight.seat}</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    <div className="bg-white/90 backdrop-blur rounded-3xl shadow-lg border border-white p-6 relative overflow-hidden group">
                        <div className="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                            <Icons.Hotel />
                        </div>
                        <h3 className="text-xl font-bold text-gray-800 mb-6 flex items-center">
                            <span className="bg-orange-100 text-orange-500 p-2 rounded-xl mr-3"><Icons.Hotel /></span> ä½å®¿å®‰æ’
                        </h3>
                        <div className="space-y-4">
                            {hotels.map((hotel, idx) => (
                                <div key={idx} className="flex flex-col border-b border-dashed border-orange-200 pb-4 last:border-0 last:pb-0">
                                    <div className="flex justify-between items-start mb-2">
                                        <span className="text-xs font-bold text-orange-600 bg-orange-50 px-2 py-1 rounded-lg">{hotel.date}</span>
                                        <span className="text-sm font-mono font-bold text-gray-600">Â¥{hotel.price}</span>
                                    </div>
                                    <h4 className="font-bold text-gray-800 text-base mb-1">{hotel.name}</h4>
                                    <div className="flex justify-between text-xs text-gray-500">
                                        <span className="flex items-center"><span className="mr-1 w-3 text-orange-400"><Icons.MapPin /></span>{hotel.area}</span>
                                        <span className="text-gray-400 italic">{hotel.note}</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // UI çµ„ä»¶ï¼šé ç®—æ¦‚è¦½
        const BudgetView = ({ budget }) => {
            const total = budget.reduce((sum, item) => sum + item.twd, 0);

            return (
                <div className="bg-white/90 backdrop-blur rounded-3xl shadow-lg border border-white p-8 relative overflow-hidden">
                    <div className="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-green-400 to-teal-500"></div>
                    <div className="flex justify-between items-center mb-8">
                        <h3 className="text-2xl font-bold text-gray-800 flex items-center">
                            <span className="bg-green-100 text-green-600 p-2 rounded-xl mr-3"><Icons.Wallet /></span> é ä¼°è²»ç”¨ (TWD)
                        </h3>
                    </div>

                    <div className="overflow-x-auto">
                        <table className="w-full text-left border-collapse">
                            <thead>
                                <tr className="text-gray-400 border-b-2 border-gray-100 text-sm">
                                    <th className="py-4 font-bold tracking-wider">é …ç›®</th>
                                    <th className="py-4 font-bold tracking-wider text-right">é‡‘é¡ (TWD)</th>
                                    <th className="py-4 font-bold tracking-wider pl-8">å‚™è¨»</th>
                                </tr>
                            </thead>
                            <tbody className="text-sm">
                                {budget.map((item, idx) => (
                                    <tr key={idx} className="border-b border-gray-50 hover:bg-green-50/50 transition-colors">
                                        <td className="py-4 text-gray-700 font-medium">{item.item}</td>
                                        <td className="py-4 text-right font-mono font-bold text-gray-600">{item.twd.toLocaleString()}</td>
                                        <td className="py-4 pl-8 text-gray-400 text-xs italic">{item.note}</td>
                                    </tr>
                                ))}
                            </tbody>
                            <tfoot>
                                <tr className="bg-green-50/30">
                                    <td className="py-6 font-black text-gray-800 text-lg">ç¸½è¨ˆé ä¼°</td>
                                    <td className="py-6 text-right font-mono text-2xl font-black text-green-600">{total.toLocaleString()}</td>
                                    <td></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div className="mt-6 text-xs text-gray-400 text-right flex items-center justify-end">
                        <Icons.Info /> <span className="ml-1">å¯¦éš›è²»ç”¨è«‹ä¾ç•¶ä¸‹åŒ¯ç‡èˆ‡æ¶ˆè²»ç‚ºä¸»</span>
                    </div>
                </div>
            );
        };

        // ä¸»æ‡‰ç”¨ç¨‹å¼
        const App = () => {
            const [activeTab, setActiveTab] = useState("itinerary");

            useEffect(() => {
                lucide.createIcons();
            }, [activeTab]);

            return (
                <div className="max-w-4xl mx-auto px-4 py-8 min-h-screen relative">
                    {/* èƒŒæ™¯æµ·æµªè£é£¾ */}
                    <div className="fixed top-0 left-0 w-full h-64 bg-gradient-to-b from-okinawa-sea to-transparent -z-10 opacity-10"></div>
                    <div className="fixed top-0 left-0 w-full overflow-hidden -z-10 opacity-20">
                        <svg className="relative block w-[200%] h-[200px] animate-wave" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 120" preserveAspectRatio="none">
                            <path d="M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z" fill="#00A3AF"></path>
                        </svg>
                    </div>

                    {/* æ¨™é¡Œå€ */}
                    <div className="mb-10 text-center relative">
                        <div className="inline-block relative">
                            <h1 className="text-3xl sm:text-4xl font-black text-gray-800 mb-3 tracking-tight relative z-10">
                                {TRIP_DATA.meta.title} <span className="text-okinawa-coral">ğŸŒº</span>
                            </h1>
                            <div className="absolute -bottom-2 -right-4 text-okinawa-sun animate-float">
                                <Icons.Sun />
                            </div>
                        </div>

                        <p className="text-gray-500 flex justify-center items-center space-x-4 text-sm font-medium bg-white/50 inline-block px-6 py-2 rounded-full backdrop-blur-sm shadow-sm mt-2">
                            <span className="flex items-center text-okinawa-sea"><span className="mr-2"><Icons.Calendar /></span>{TRIP_DATA.meta.dates}</span>
                            <span className="w-1.5 h-1.5 bg-gray-300 rounded-full"></span>
                            <span className="text-gray-600">{TRIP_DATA.meta.travelers} äººè¡Œ</span>
                        </p>
                    </div>

                    {/* å°èˆª */}
                    <Tabs activeTab={activeTab} onTabChange={setActiveTab} />

                    {/* è¢å¹•é¡¯ç¤ºå…§å®¹å€ */}
                    <div className="animate-fade-in pb-12">
                        {activeTab === "itinerary" && <ItineraryView data={TRIP_DATA.itinerary} />}
                        {activeTab === "logistics" && <LogisticsView flights={TRIP_DATA.flights} hotels={TRIP_DATA.hotels} />}
                        {activeTab === "budget" && <BudgetView budget={TRIP_DATA.budget} />}
                    </div>

                    {/* åº•éƒ¨è£é£¾ */}
                    <div className="text-center text-gray-400 text-xs py-8">
                        Have a nice trip to Okinawa! ğŸ–ï¸
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>

</html>